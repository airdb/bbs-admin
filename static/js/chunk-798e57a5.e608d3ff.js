(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-798e57a5"],{"0196":function(t,e,i){"use strict";var a=i("d8db"),n=i.n(a);n.a},6297:function(t,e,i){"use strict";var a=i("9a5a"),n=i.n(a);n.a},"7abe":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("panel-group"),t._v(" "),t._l(t.chartList,(function(e,a){return i("div",{key:a,staticClass:"charts"},[i("chart-"+e.chartType,{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],tag:"component",attrs:{"chart-data":e.chartData||{nameList:[],xList:[],dataList:[]},"mark-point":e.markPoint,title:e.title,"x-unit":e.xUnit,"y-unit":e.yUnit,height:e.height,"toolbox-show":e.toolboxShow||!1}})],1)}))],2)},n=[],r=(i("ac6a"),i("176e"));function o(t){return Object(r["a"])({url:"/apis/bbs/v1/charts/userLoginAnalyze",method:"get",params:t})}var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",{staticClass:"panel-group",attrs:{gutter:40}},t._l(t.list,(function(e,a){return i("el-col",{key:a,staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[i("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("newVisitis")}}},[i("div",{class:"card-panel-icon-wrapper icon-"+e.type},[i("i",{class:"el-icon "+e.icon})]),t._v(" "),i("div",{staticClass:"card-panel-description"},[i("div",{staticClass:"card-panel-text"},[t._v("\n          "+t._s(e.title)+"\n        ")]),t._v(" "),i("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.total,duration:2600}})],1)])])})),1)},l=[];i("ac4d"),i("8a81");function c(){return Object(r["a"])({url:"/apis/bbs/v1/count/platformDataCount",method:"get"})}var h=i("ec1b"),d=i.n(h),u={components:{CountTo:d.a},data:function(){return{list:[{title:"问题数",type:"questions",total:0,icon:"el-icon-albb-message_fill"},{title:"文章数",type:"articles",total:0,icon:"el-icon-albb-createtask_fill"},{title:"专栏数",type:"columns",total:0,icon:"el-icon-albb-order_fill"},{title:"用户数",type:"users",total:0,icon:"el-icon-albb-group_fill"}]}},mounted:function(){this.getPlatformDataCount()},methods:{handleSetLineChartData:function(t){this.$emit("handleSetLineChartData",t)},getPlatformDataCount:function(){var t=this;c().then((function(e){if(e.success){var i=e.content,a=!0,n=!1,r=void 0;try{for(var o,s=t.list[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value;i[l.type]&&(l.total=i[l.type])}}catch(c){n=!0,r=c}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}}else console.log("获取信息失败")}))}}},f=u,p=(i("0196"),i("2877")),g=Object(p["a"])(f,s,l,!1,null,"bf096c02",null),y=g.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:"height:"+t.height+"; width: "+t.width})},b=[],v=(i("8e6e"),i("456d"),i("cadf"),i("bd86")),S=(i("c5f6"),i("164e")),x=i.n(S),O=i("5880");function w(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function L(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?w(i,!0).forEach((function(e){Object(v["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):w(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var j={name:"ChartLine",props:{height:{type:String,default:"400px"},width:{type:String,default:"100%"},chartData:{type:Object},gridTop:{type:String,default:"25%"},gridLeft:{type:String,default:"3%"},gridRight:{type:String,default:"5%"},gridBottom:{type:String,default:"13%"},title:{type:String,default:""},titleFSize:{type:Number,default:16},xUnit:{type:String,default:""},yUnit:{type:String,default:""},legendOrient:{type:String,default:"horizontal"},legendX:{type:String,default:"center"},legendY:{type:String,default:"bottom"},toolboxShow:{type:Boolean,default:!0},markPoint:{type:Boolean,default:!1}},data:function(){return{chart:null,rgbList:[[3,150,255],[234,84,85],[115,103,240],[50,204,188],[248,216,0],[159,68,211],[98,58,162],[245,85,85],[140,27,171],[67,203,255]]}},computed:L({},Object(O["mapGetters"])(["theme","sidebar","fullScreen"])),watch:{chartData:function(t){this.removeChart("reset"),this.initData()},"sidebar.opened":function(){var t=this;setTimeout((function(){t.chart&&t.chart.resize()}),300)},fullScreen:function(){var t=this;setTimeout((function(){t.chart&&t.chart.resize()}),300)}},mounted:function(){this.init(),this.initData()},beforeDestroy:function(){this.removeChart()},methods:{init:function(){var t=this;this.chart=x.a.init(this.$el),window.addEventListener("resize",(function(){t.chart&&t.chart.resize()}))},initData:function(){var t=this;if(this.chartData){var e=JSON.parse(JSON.stringify(this.chartData)),i=[];e.dataList.forEach((function(a,n){var r=[Math.round(220*Math.random()),Math.round(240*Math.random()),Math.round(200*Math.random())],o=t.rgbList,s=o[n]||r;a={name:e.nameList[n],data:a,type:"line",symbolSize:5,symbol:"circle",areaStyle:{opacity:.1},smooth:!0,itemStyle:{normal:{label:{fontSize:40,padding:[90,0,0,0],color:"#fff",textStyle:{baseline:"top"}},color:"rgb("+s.join(",")+")",borderColor:"rgba("+s.join(",")+", .5)",borderWidth:6}}},t.markPoint&&(a.markPoint={label:{show:!0},data:[{type:"max",name:"最大值",label:"最大值"},{type:"min",name:"最小值",label:"最小值"}]},a.markLine={data:[{type:"average",name:"平均值"}]}),i.push(a)})),e.dataList=i,this.initChart(e)}},initChart:function(t){this.chart.setOption({title:{text:this.title,textStyle:{fontSize:this.titleFSize}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:this.theme}}},legend:{orient:this.legendOrient,y:this.legendY,x:this.legendX,data:t.nameList},toolbox:{show:this.toolboxShow,feature:{dataView:{show:!0,readOnly:!1},saveAsImage:{show:!0}}},grid:{top:this.gridTop,left:this.gridLeft,right:this.gridRight,bottom:this.gridBottom,containLabel:!0},xAxis:{name:this.xUnit,type:"category",boundaryGap:!1,data:t.xList,axisTick:{show:!1},nameTextStyle:{fontSize:12}},yAxis:{name:this.yUnit,type:"value",nameTextStyle:{fontSize:12}},series:t.dataList})},removeChart:function(t){this.chart&&(this.chart.dispose(),this.chart=null,"reset"===t&&this.init())}}},C=j,D=Object(p["a"])(C,m,b,!1,null,"29f2a2d2",null),P=D.exports,z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:"height:"+t.height+"; width: "+t.width})},k=[];function T(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function _(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?T(i,!0).forEach((function(e){Object(v["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):T(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var E={name:"ChartBar",props:{height:{type:String,default:"400px"},width:{type:String,default:"100%"},chartData:{type:Object},gridTop:{type:String,default:"25%"},gridLeft:{type:String,default:"3%"},gridRight:{type:String,default:"5%"},gridBottom:{type:String,default:"13%"},title:{type:String,default:""},titleFSize:{type:Number,default:16},xUnit:{type:String,default:""},yUnit:{type:String,default:""},legendOrient:{type:String,default:"horizontal"},legendX:{type:String,default:"center"},legendY:{type:String,default:"bottom"},toolboxShow:{type:Boolean,default:!0},markPoint:{type:Boolean,default:!1}},data:function(){return{chart:null,rgbList:[[3,150,255],[234,84,85],[115,103,240],[50,204,188],[248,216,0],[159,68,211],[98,58,162],[245,85,85],[140,27,171],[67,203,255]]}},computed:_({},Object(O["mapGetters"])(["theme","sidebar","fullScreen"])),watch:{chartData:function(t){this.removeChart("reset"),this.initData()},"sidebar.opened":function(){var t=this;setTimeout((function(){t.chart&&t.chart.resize()}),350)},fullScreen:function(){var t=this;setTimeout((function(){t.chart&&t.chart.resize()}),300)}},mounted:function(){this.init(),this.initData()},beforeDestroy:function(){this.removeChart()},methods:{init:function(){var t=this;this.chart=x.a.init(this.$el),window.addEventListener("resize",(function(){t.chart&&t.chart.resize()}))},initData:function(){var t=this;if(this.chartData){var e=JSON.parse(JSON.stringify(this.chartData)),i=[];e.dataList.forEach((function(a,n){var r=[Math.round(220*Math.random()),Math.round(240*Math.random()),Math.round(200*Math.random())],o=t.rgbList,s=o[n]||r;a={name:e.nameList[n],data:a,type:"bar",symbolSize:5,symbol:"circle",smooth:!0,itemStyle:{normal:{label:{fontSize:40,padding:[90,0,0,0],color:"#fff",textStyle:{baseline:"top"}},color:"rgb("+s.join(",")+")",borderColor:"rgba("+s.join(",")+", .5)",borderWidth:0}}},t.markPoint&&(a.markPoint={label:{show:!0},data:[{type:"max",name:"最大值",label:"最大值"},{type:"min",name:"最小值",label:"最小值"}]},a.markLine={data:[{type:"average",name:"平均值"}]}),i.push(a)})),e.dataList=i,this.initChart(e)}},initChart:function(t){this.chart.setOption({title:{text:this.title,textStyle:{fontSize:this.titleFSize}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:this.theme}}},legend:{orient:this.legendOrient,y:this.legendY,x:this.legendX,data:t.nameList},toolbox:{show:this.toolboxShow,feature:{dataView:{show:!0,readOnly:!1},saveAsImage:{show:!0}}},grid:{top:this.gridTop,left:this.gridLeft,right:this.gridRight,bottom:this.gridBottom,containLabel:!0},xAxis:{name:this.xUnit,type:"category",boundaryGap:!0,data:t.xList,axisTick:{show:!1},nameTextStyle:{fontSize:12}},yAxis:{name:this.yUnit,type:"value",nameTextStyle:{fontSize:12}},series:t.dataList})},removeChart:function(t){this.chart&&(this.chart.dispose(),this.chart=null,"reset"===t&&this.init())}}},M=E,U=Object(p["a"])(M,z,k,!1,null,"ae6fdb30",null),A=U.exports,B={components:{PanelGroup:y,"chart-line":P,"chart-bar":A},data:function(){return{loading:!1,chartList:[{dataType:"loginAnalyze",title:"近7天用户登录分析",height:"100%",chartType:"line",xUnit:"小时",yUnit:"次",chartData:{nameList:[],xList:[],dataList:[]}}]}},mounted:function(){this.getCharts()},methods:{getCharts:function(){var t=this;this.loading=!0,o({days:7}).then((function(e){if(t.loading=!1,e.success){var i=e.content;t.chartList.forEach((function(t){"loginAnalyze"===t.dataType&&(t.chartData={nameList:i.daysList,xList:i.timeList,dataList:i.dataList})}))}})).catch((function(){t.loading=!1}))}}},N=B,$=(i("6297"),Object(p["a"])(N,a,n,!1,null,"f6b537be",null));e["default"]=$.exports},"9a5a":function(t,e,i){},d8db:function(t,e,i){}}]);