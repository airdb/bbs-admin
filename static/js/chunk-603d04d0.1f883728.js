(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-603d04d0","chunk-d34dd9a2","chunk-fb0e3fb8","chunk-2d230fe7"],{"0ded":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent},scopedSlots:e._u([{key:"col-status",fn:function(e){return[a("i",{class:1===e.row.status?"el-icon-check":"el-icon-close",style:{color:1===e.row.status?"#67c23a":"#f56c6c",fontSize:"20px"}})]}},{key:"bt-status",fn:function(t){return[!t.data.item.show||t.data.item.ifRender&&!t.data.item.ifRender(t.data.row)?e._e():a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:t.data.row.status-1>=0?"danger":"success",icon:t.data.item.icon,disabled:t.data.item.disabled,loading:t.data.row[t.data.item.loading]},on:{click:function(a){return e.handleClick(t.data.item.event,t.data.row)}}},[e._v("\n        "+e._s(t.data.row.status-1>=0?"停用":"启用")+"\n      ")])]}}])}),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},["userTransfer"!==e.dialogInfo.type?a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,rules:e.formInfo.rules,"label-width":e.formInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.formInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.formInfo,"ref",t)},handleClick:e.handleClick,handleEvent:e.handleEvent},scopedSlots:e._u([{key:"form-avatar",fn:function(){return[a("div",{staticClass:"slot-avatar"},[a("img",{directives:[{name:"imgAlart",rawName:"v-imgAlart"}],staticStyle:{height:"30px"},attrs:{src:e.formInfo.data.avatar}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-picture",size:"mini"},on:{click:function(t){return e.handleClick("selectFile")}}},[e._v("\n            "+e._s(e.formInfo.data.avatar?"更换头像":"选择头像")+"\n          ")])],1)]},proxy:!0}],null,!1,2126041112)}):a("div",{},[e._v("\n      是否将\n      "),a("span",{style:"color: "+e.theme+";"},[e._v(e._s(e.userTransferInfo.userName))]),e._v("\n      创建的用户转移给\n      "),a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择一个用户",filterable:"",clearable:""},model:{value:e.userTransferInfo.toUser,callback:function(t){e.$set(e.userTransferInfo,"toUser",t)},expression:"userTransferInfo.toUser"}},e._l(e.listTypeInfo.userList.filter((function(t){return!e.userTransferInfo.createUserList.includes(t.value)&&t.value!==e.userTransferInfo.user})),(function(e){return a("el-option",{key:e.id,attrs:{label:e.key,value:e.value}})})),1)],1)],1),e._v(" "),e.selectFileInfo.visible?a("select-file",{attrs:{type:e.selectFileInfo.type,visible:e.selectFileInfo.visible},on:{"update:visible":function(t){return e.$set(e.selectFileInfo,"visible",t)}},model:{value:e.formInfo.data.avatar,callback:function(t){e.$set(e.formInfo.data,"avatar",t)},expression:"formInfo.data.avatar"}}):e._e()],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("bd86")),s=a("5880"),r=a("4de7"),o=a("5f8b"),c=a("e94a"),d=a("0d40"),f=a("5ccc"),u=a("7a02");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={components:{PageFilter:o["a"],PageTable:c["a"],PageDialog:d["a"],PageForm:f["a"],SelectFile:u["a"]},data:function(){var e=this,t=function(t,a,i){var n=e.$validate({label:"账号",value:a,rules:["notnull","noChinese","max"],conditions:[12]});n.result?i():i(new Error(n.message))},a=function(t,a,i){var n=e.$validate({label:"密码",value:a,rules:["notnull","length"],conditions:[6,15]});n.result?i():i(new Error(n.message))},i=function(t,a,i){var n=e.$validate({label:"手机号码",value:a,rules:["phone"]});n.result?i():i(new Error(n.message))},n=function(t,a,i){var n=e.$validate({label:"微信",value:a,rules:["noChinese","max"],conditions:[12]});n.result?i():i(new Error(n.message))},l=function(t,a,i){var n=e.$validate({label:"QQ",value:a,rules:["noChinese","max"],conditions:[12]});n.result?i():i(new Error(n.message))},s=function(t,a,i){var n=e.$validate({label:"邮箱",value:a,rules:["email","max"],conditions:[24]});n.result?i():i(new Error(n.message))};return{getListApi:r["e"],createApi:r["a"],updateApi:r["f"],deleteApi:r["b"],listTypeInfo:{sexList:[{key:"女",value:1},{key:"男",value:0}],accountTypeList:[{key:"手机用户",value:0},{key:"论坛用户",value:1},{key:"平台用户",value:2}],statusList:[{key:"启用",value:1},{key:"停用",value:0}],userList:[]},filterInfo:{query:{create_user:"",account:"",name:""},list:[{type:"input",label:"账户",value:"account"},{type:"input",label:"用户名",value:"name"},{type:"select",label:"创建人",value:"create_user",list:"userList"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0},{type:"button",label:"添加",btType:"primary",icon:"el-icon-plus",event:"create",show:!1}]},tableInfo:{refresh:1,initCurpage:1,data:[],fieldList:[{label:"账号",value:"account"},{label:"用户名",value:"name"},{label:"所属角色",value:"role_name",minWidth:120},{label:"性别",value:"sex",width:80,list:"sexList"},{label:"账号类型",value:"type",width:100,list:"accountTypeList"},{label:"状态",value:"status",width:90,type:"slot",list:"statusList"},{label:"创建人",value:"create_user_name"},{label:"创建时间",value:"create_time",minWidth:180},{label:"更新人",value:"update_user_name"},{label:"更新时间",value:"update_time",minWidth:180}],handle:{fixed:"right",label:"操作",width:"280",btList:[{label:"启用",type:"success",icon:"el-icon-albb-process",event:"status",loading:"statusLoading",show:!1,slot:!0},{label:"编辑",type:"",icon:"el-icon-edit",event:"update",show:!1},{label:"删除",type:"danger",icon:"el-icon-delete",event:"delete",loading:"deleteLoading",show:!1}]}},formInfo:{ref:null,data:{id:"",account:"",password:"",name:"",type:2,sex:0,avatar:"",phone:"",wechat:"",qq:"",email:"",desc:"",status:1},fieldList:[{label:"账号",value:"account",type:"input",required:!0,validator:t},{label:"密码",value:"password",type:"password",required:!0,validator:a},{label:"昵称",value:"name",type:"input",required:!0},{label:"性别",value:"sex",type:"select",list:"sexList",required:!0},{label:"头像",value:"avatar",type:"slot",className:"el-form-block"},{label:"手机号码",value:"phone",type:"input",validator:i},{label:"微信",value:"wechat",type:"input",validator:n},{label:"QQ",value:"qq",type:"input",validator:l},{label:"邮箱",value:"email",type:"input",validator:s},{label:"描述",value:"desc",type:"textarea",className:"el-form-block"},{label:"状态",value:"status",type:"select",list:"statusList",required:!0}],rules:{},labelWidth:"120px"},dialogInfo:{title:{create:"添加",update:"编辑",userTransfer:"用户转移"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]},userTransferInfo:{user:"",toUser:"",createUserList:[],userName:""},selectFileInfo:{type:2,visible:!1,value:""}}},computed:b({},Object(s["mapGetters"])(["theme","userInfo","dataPerms"])),watch:{"dialogInfo.visible":function(e){var t=this.formInfo;e||(t.ref&&t.ref.resetFields(),this.resetForm(),this.dialogInfo.btLoading=!1,this.userTransferInfo={user:"",toUser:"",createUserList:[],userName:""})},"dialogInfo.type":function(e){var t=this.formInfo;switch(e){case"create":var a=!0,i=!1,n=void 0;try{for(var l,s=t.fieldList[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var r=l.value;"account"===r.value&&(r.type="input")}}catch(b){i=!0,n=b}finally{try{a||null==s.return||s.return()}finally{if(i)throw n}}break;case"update":var o=!0,c=!1,d=void 0;try{for(var f,u=t.fieldList[Symbol.iterator]();!(o=(f=u.next()).done);o=!0){var p=f.value;"account"===p.value&&(p.type="tag")}}catch(b){c=!0,d=b}finally{try{o||null==u.return||u.return()}finally{if(c)throw d}}break}}},mounted:function(){this.initList(),this.initDataPerms(),this.initRules(),this.getList()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList,t=this.filterInfo.list;this.$initDataPerms("userMan",e),this.$initDataPerms("userMan",t)},initRules:function(){var e=this.formInfo;e.rules=this.$initRules(e.fieldList)},initList:function(){var e=this,t=this.listTypeInfo;Object(r["c"])().then((function(a){a.success?t.userList=a.content.map((function(e){return{key:e.name,value:e.id}})):e.$message({showClose:!0,message:a.message,type:a.success?"success":"error",duration:3500})}))},getList:function(){this.tableInfo.refresh=Math.random()},getPlaceholder:function(e){var t;return t="input"===e.type||"textarea"===e.type?"请输入"+e.label:"select"===e.type||"time"===e.type||"date"===e.type?"请选择"+e.label:e.label,t},handleClick:function(e,t){var a=this,i=this.tableInfo,n=this.dialogInfo,l=this.formInfo,s=this.userTransferInfo;switch(e){case"search":i.initCurpage=Math.random(),i.refresh=Math.random();break;case"create":n.type=e,n.visible=!0;break;case"update":for(var o in n.type=e,n.visible=!0,t)o in l.data&&(l.data[o]=t[o]);break;case"status":var c={};for(var d in t.statusLoading=!0,t)d in l.data&&(c[d]=t[d]);c.status=c.status-1>=0?0:1,this.$handleAPI("update",r["f"],c).then((function(e){t.statusLoading=!1,e.success&&(t.status=c.status)})).catch((function(){t.statusLoading=!1}));break;case"delete":t.deleteLoading=!0,Object(r["d"])(t.id).then((function(l){t.deleteLoading=!1,l.success?a.$handleAPI(e,r["b"],t.id).then((function(e){e.success&&(i.refresh=Math.random(),a.initList())})):a.$confirm("该用户有创建用户，是否将创建用户转移后删除?","提示",{confirmButtonText:"下一步",cancelButtonText:"取消",type:"info"}).then((function(){n.type="userTransfer",n.visible=!0,s.user=t.id,s.userName=t.name,s.createUserList=l.result})).catch((function(){}))})).catch((function(){t.deleteLoading=!1}));break;case"close":n.visible=!1;break;case"save":if("userTransfer"===n.type)return s.toUser?(n.btLoading=!0,void Object(r["g"])({user:s.user,toUser:s.toUser}).then((function(e){e.success&&(a.$handleAPI("delete",r["b"],s.user).then((function(e){e.success&&(i.refresh=Math.random(),a.initList())})),n.visible=!1),n.btLoading=!1,a.$message({showClose:!0,message:e.message,type:e.success?"success":"error",duration:3500})})).catch((function(){n.btLoading=!1,n.visible=!1}))):void this.$message({showClose:!0,message:"接收用户不能为空",type:"error",duration:3500});this.formInfo.ref.validate((function(e){if(e){var t,l=a.formInfo.data,s=a.dialogInfo.type;if("create"===s)t=r["a"];else{if("update"!==s)return;t=r["f"]}n.btLoading=!0,a.$handleAPI(s,t,l).then((function(e){e.success&&(n.visible=!1,i.refresh=Math.random()),n.btLoading=!1})).catch((function(e){n.btLoading=!1}))}}));break;case"selectFile":this.selectFileInfo.visible=!0;break}},handleEvent:function(e,t){var a=this;switch(e){case"list":if(!t)return;t.forEach((function(e){a.$set(e,"statusLoading",!1),a.$set(e,"deleteLoading",!1),e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break}},resetForm:function(){this.formInfo.data={id:"",account:"",password:"",name:"",type:2,sex:0,avatar:"",phone:"",wechat:"",qq:"",email:"",desc:"",status:1}}}},m=h,v=(a("23cd"),a("2877")),y=Object(v["a"])(m,i,n,!1,null,null,null);t["default"]=y.exports},"0e06":function(e,t,a){"use strict";var i=a("cfcc"),n=a.n(i);n.a},"0f33":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"left"},[a("div",{staticStyle:{"padding-bottom":"10px"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"请选择菜单类型"},model:{value:e.menuType,callback:function(t){e.menuType=t},expression:"menuType"}},e._l(e.listTypeInfo.menuTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.key,value:e.value}})})),1)],1),e._v(" "),a("page-tree",{attrs:{"expand-all":!0,"load-type":1,"default-clicked":e.treeInfo.defaultClicked,"default-high-light":e.treeInfo.defaultHighLight,"default-expanded":e.treeInfo.defaultExpanded,"tree-data":e.treeInfo.treeData,"base-data":e.treeInfo.baseData,"node-key":e.treeInfo.nodeKey,"load-info":e.treeInfo.loadInfo,"right-menu-list":e.treeInfo.rightMenuList,"tree-refresh":e.treeInfo.refresh,"refresh-level":e.treeInfo.refreshLevel},on:{"update:baseData":function(t){return e.$set(e.treeInfo,"baseData",t)},"update:base-data":function(t){return e.$set(e.treeInfo,"baseData",t)},"update:loadInfo":function(t){return e.$set(e.treeInfo,"loadInfo",t)},"update:load-info":function(t){return e.$set(e.treeInfo,"loadInfo",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}})],1),e._v(" "),a("div",{staticClass:"right"},[a("el-tabs",{on:{"tab-click":function(t){return e.handleEvent("tabClick")}},model:{value:e.tabActive,callback:function(t){e.tabActive=t},expression:"tabActive"}},[a("el-tab-pane",{attrs:{label:"菜单详情",name:"menu"}},[a("page-card",{class:"card",attrs:{title:e.cardInfo.title,data:e.cardInfo.data,"field-list":e.cardInfo.fieldList,"list-type-info":e.listTypeInfo},on:{"update:data":function(t){return e.$set(e.cardInfo,"data",t)}}})],1),e._v(" "),1===e.treeInfo.leftClickData.component?a("el-tab-pane",{attrs:{label:"数据权限",name:"menuData"}},[[a("div",{},[e.dataPerms.includes("menuMan:persCreate")?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.handleClick("persCreate")}}},[e._v("\n              添加\n            ")]):e._e(),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-refresh",type:"primary"},on:{click:function(t){e.tableInfo.refresh=Math.random()}}},[e._v("\n              刷新\n            ")])],1),e._v(" "),a("page-table",{class:"table",attrs:{refresh:e.tableInfo.refresh,pager:e.tableInfo.pager,data:e.tableInfo.data,api:e.dataPermsGetAllApi,query:{menuId:e.treeInfo.leftClickData.id},"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}})]],2):e._e()],1)],1),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},["create"===e.dialogInfo.type||"update"===e.dialogInfo.type?a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,rules:e.formInfo.rules,"label-width":e.formInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.formInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.formInfo,"ref",t)}},scopedSlots:e._u([{key:"form-icon",fn:function(){return[a("el-select",{attrs:{placeholder:"请选择图标",filterable:"",clearable:""},model:{value:e.formInfo.data.icon,callback:function(t){e.$set(e.formInfo.data,"icon",t)},expression:"formInfo.data.icon"}},[a("template",{slot:"prefix"},[e.formInfo.data.icon?a("i",{class:"header-icon "+e.formInfo.data.icon,staticStyle:{"vertical-align":"middle","font-size":"20px",color:"black"}}):e._e()]),e._v(" "),e._l(e.listTypeInfo.iconList,(function(t,i){return a("el-option",{key:i,attrs:{label:t.key,value:t.value}},[e._t("default",[a("i",{class:t.value,staticStyle:{display:"inline-block","vertical-align":"middle",width:"30px","font-size":"20px"}}),e._v(e._s(t.class)+"\n            ")])],2)}))],2)]},proxy:!0}],null,!0)}):e._e(),e._v(" "),"persCreate"===e.dialogInfo.type||"persUpdate"===e.dialogInfo.type?a("page-form",{attrs:{"ref-obj":e.dataControlFormInfo.ref,data:e.dataControlFormInfo.data,"field-list":e.dataControlFormInfo.fieldList,rules:e.dataControlFormInfo.rules,"label-width":e.dataControlFormInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.dataControlFormInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.dataControlFormInfo,"ref",t)}}}):e._e()],1)],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("6762"),a("2fdb"),a("ac6a"),a("7f7f"),a("bd86")),s=a("5880"),r=a("f7a6"),o=a("6169"),c=a("2e97"),d=a("e94a"),f=a("0d40"),u=a("5ccc"),p=[{class:"el-icon-albb-accessory"},{class:"el-icon-albb-activity"},{class:"el-icon-albb-add"},{class:"el-icon-albb-addition_fill"},{class:"el-icon-albb-addition"},{class:"el-icon-albb-addpeople_fill"},{class:"el-icon-albb-addpeople"},{class:"el-icon-albb-addressbook_fill"},{class:"el-icon-albb-addressbook"},{class:"el-icon-albb-barrage_fill"},{class:"el-icon-albb-barrage"},{class:"el-icon-albb-browse_fill"},{class:"el-icon-albb-browse"},{class:"el-icon-albb-brush"},{class:"el-icon-albb-brush_fill"},{class:"el-icon-albb-businesscard_fill"},{class:"el-icon-albb-businesscard"},{class:"el-icon-albb-camera_fill"},{class:"el-icon-albb-camera"},{class:"el-icon-albb-clock_fill"},{class:"el-icon-albb-clock"},{class:"el-icon-albb-close"},{class:"el-icon-albb-collection_fill"},{class:"el-icon-albb-collection"},{class:"el-icon-albb-computer_fill"},{class:"el-icon-albb-computer"},{class:"el-icon-albb-coordinates_fill"},{class:"el-icon-albb-coordinates"},{class:"el-icon-albb-coupons_fill"},{class:"el-icon-albb-coupons"},{class:"el-icon-albb-createtask_fill"},{class:"el-icon-albb-createtask"},{class:"el-icon-albb-customerservice_fill"},{class:"el-icon-albb-customerservice"},{class:"el-icon-albb-delete_fill"},{class:"el-icon-albb-delete"},{class:"el-icon-albb-document-albb"},{class:"el-icon-albb-document_fill"},{class:"el-icon-albb-dynamic_fill"},{class:"el-icon-albb-dynamic"},{class:"el-icon-albb-editor"},{class:"el-icon-albb-eit"},{class:"el-icon-albb-emoji_fill"},{class:"el-icon-albb-emoji"},{class:"el-icon-albb-empty"},{class:"el-icon-albb-empty_fill"},{class:"el-icon-albb-enter"},{class:"el-icon-albb-enterinto"},{class:"el-icon-albb-enterinto_fill"},{class:"el-icon-albb-feedback_fill"},{class:"el-icon-albb-feedback"},{class:"el-icon-albb-flag_fill"},{class:"el-icon-albb-flag"},{class:"el-icon-albb-flashlight"},{class:"el-icon-albb-flashlight_fill"},{class:"el-icon-albb-flip"},{class:"el-icon-albb-flip_fill"},{class:"el-icon-albb-fullscreen"},{class:"el-icon-albb-group"},{class:"el-icon-albb-group_fill"},{class:"el-icon-albb-headlines_fill"},{class:"el-icon-albb-headlines"},{class:"el-icon-albb-homepage_fill"},{class:"el-icon-albb-homepage"},{class:"el-icon-albb-integral_fill"},{class:"el-icon-albb-integral"},{class:"el-icon-albb-interactive_fill"},{class:"el-icon-albb-interactive"},{class:"el-icon-albb-keyboard"},{class:"el-icon-albb-label"},{class:"el-icon-albb-label_fill"},{class:"el-icon-albb-like_fill"},{class:"el-icon-albb-like"},{class:"el-icon-albb-live_fill"},{class:"el-icon-albb-live"},{class:"el-icon-albb-lock_fill"},{class:"el-icon-albb-lock"},{class:"el-icon-albb-mail"},{class:"el-icon-albb-mail_fill"},{class:"el-icon-albb-manage_fill"},{class:"el-icon-albb-manage"},{class:"el-icon-albb-message"},{class:"el-icon-albb-message_fill"},{class:"el-icon-albb-mine"},{class:"el-icon-albb-mine_fill"},{class:"el-icon-albb-mobilephone_fill"},{class:"el-icon-albb-mobilephone"},{class:"el-icon-albb-more"},{class:"el-icon-albb-narrow"},{class:"el-icon-albb-offline_fill"},{class:"el-icon-albb-offline"},{class:"el-icon-albb-order_fill"},{class:"el-icon-albb-order"},{class:"el-icon-albb-other"},{class:"el-icon-albb-people_fill"},{class:"el-icon-albb-people"},{class:"el-icon-albb-picture_fill"},{class:"el-icon-albb-picture"},{class:"el-icon-albb-play"},{class:"el-icon-albb-play_fill"},{class:"el-icon-albb-playon_fill"},{class:"el-icon-albb-playon"},{class:"el-icon-albb-praise_fill"},{class:"el-icon-albb-praise"},{class:"el-icon-albb-supply"},{class:"el-icon-albb-prompt_fill"},{class:"el-icon-albb-prompt"},{class:"el-icon-albb-qrcode_fill"},{class:"el-icon-albb-qrcode"},{class:"el-icon-albb-redpacket_fill"},{class:"el-icon-albb-redpacket"},{class:"el-icon-albb-refresh"},{class:"el-icon-albb-remind_fill"},{class:"el-icon-albb-remind"},{class:"el-icon-albb-return"},{class:"el-icon-albb-right"},{class:"el-icon-albb-scan"},{class:"el-icon-albb-select_fill"},{class:"el-icon-albb-select"},{class:"el-icon-albb-send"},{class:"el-icon-albb-service_fill"},{class:"el-icon-albb-service"},{class:"el-icon-albb-setup_fill"},{class:"el-icon-albb-setup"},{class:"el-icon-albb-share_fill"},{class:"el-icon-albb-share"},{class:"el-icon-albb-shielding_fill"},{class:"el-icon-albb-shielding"},{class:"el-icon-albb-smallscreen_fill"},{class:"el-icon-albb-smallscreen"},{class:"el-icon-albb-stealth_fill"},{class:"el-icon-albb-stealth"},{class:"el-icon-albb-success_fill"},{class:"el-icon-albb-success"},{class:"el-icon-albb-suspend"},{class:"el-icon-albb-switch"},{class:"el-icon-albb-systemprompt_fill"},{class:"el-icon-albb-systemprompt"},{class:"el-icon-albb-tailor"},{class:"el-icon-albb-task_fill"},{class:"el-icon-albb-task"},{class:"el-icon-albb-tasklist_fill"},{class:"el-icon-albb-tasklist"},{class:"el-icon-albb-text"},{class:"el-icon-albb-time_fill"},{class:"el-icon-albb-time"},{class:"el-icon-albb-translation_fill"},{class:"el-icon-albb-translation"},{class:"el-icon-albb-trash_fill"},{class:"el-icon-albb-trash"},{class:"el-icon-albb-undo"},{class:"el-icon-albb-unlock"},{class:"el-icon-albb-video_fill"},{class:"el-icon-albb-video"},{class:"el-icon-albb-warning_fill"},{class:"el-icon-albb-warning"},{class:"el-icon-albb-workbench_fill"},{class:"el-icon-albb-workbench"},{class:"el-icon-albb-search-albb"},{class:"el-icon-albb-searchfill"},{class:"el-icon-albb-qianniu"},{class:"el-icon-albb-publishgoods_fill"},{class:"el-icon-albb-shop_fill"},{class:"el-icon-albb-transaction_fill"},{class:"el-icon-albb-packup"},{class:"el-icon-albb-unfold"},{class:"el-icon-albb-wangwang"},{class:"el-icon-albb-financial_fill"},{class:"el-icon-albb-marketing_fill"},{class:"el-icon-albb-shake"},{class:"el-icon-albb-decoration_fill"},{class:"el-icon-albb-budaidise"},{class:"el-icon-albb-qianniudaidise"},{class:"el-icon-albb-questions"},{class:"el-icon-albb-supply"},{class:"el-icon-albb-tools"},{class:"el-icon-albb-int"}];function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={components:{PageTree:o["a"],PageCard:c["a"],PageTable:d["a"],PageDialog:f["a"],PageForm:u["a"]},data:function(){return{createApi:r["a"],updateApi:r["j"],deleteApi:r["f"],getAllApi:r["g"],dataPermsCreateApi:r["b"],dataPermsUpdateApi:r["e"],dataPermsDeleteApi:r["c"],dataPermsGetAllApi:r["d"],menuType:1,tabActive:"menu",listTypeInfo:{iconList:p.map((function(e){return e.key=e.class,e.value=e.class,e})),statusList:[{key:"启用",value:1},{key:"停用",value:0}],menuTypeList:[{key:"平台端",value:1},{key:"论坛端",value:2},{key:"移动端",value:3}],componentList:[{key:"根目录",value:-1},{key:"页面组件",value:1},{key:"默认布局组件",value:2}],componentList1:[{key:"页面组件",value:1},{key:"默认布局组件",value:2}],dataControlTypeList:[{key:"按钮点击",value:1},{key:"右键菜单",value:2},{key:"链接访问",value:3}],reqTypeList:[{key:"GET",value:1},{key:"POST",value:2},{key:"PUT",value:3},{key:"DELETE",value:4}],treeList:[]},treeInfo:{initTree:!1,refresh:1,nodeKey:"key",defaultClicked:{},defaultHighLight:"",defaultExpanded:[],defaultClickedAsyc:"",defaultHighLightAsyc:"",defaultExpandedAsyc:[],treeData:[],baseData:[],loadInfo:{key:"id",label:"name",api:r["g"],params:{data:[{key:"type",value:1}],type:"query"},resFieldList:["content"]},leftClickData:{},rightClickData:{},rightMenuList:[]},cardInfo:{title:"菜单详情",data:{},fieldList:[{label:"所属菜单",value:"pid",list:"treeList"},{label:"菜单类型",value:"type",list:"menuTypeList"},{label:"菜单编码",value:"code"},{label:"菜单名称",value:"name"},{label:"菜单组件",value:"component",list:"componentList"},{label:"菜单图标",value:"icon"},{label:"重定向路径",value:"redirect"},{label:"排序",value:"sort"},{label:"描述",value:"desc"},{label:"状态",value:"status",list:"statusList"},{label:"创建人",value:"create_user_name"},{label:"创建时间",value:"create_time"},{label:"更新人",value:"update_user_name"},{label:"更新时间",value:"update_time"}]},tableInfo:{refresh:1,initTable:!1,initCurpage:1,pager:!1,data:[],fieldList:[{label:"所属菜单",value:"menu_id",list:"treeList",required:!0},{label:"功能类型",value:"type",list:"dataControlTypeList",required:!0},{label:"功能编码",value:"code",required:!0,minWidth:160},{label:"功能名称",value:"name",required:!0},{label:"功能api",value:"api",required:!0},{label:"请求方式",value:"method",list:"reqTypeList",required:!0}],handle:{fixed:"right",label:"操作",width:"200",btList:[{label:"编辑",type:"",icon:"el-icon-edit",event:"persUpdate",show:!1},{label:"删除",type:"danger",icon:"el-icon-delete",event:"persDelete",show:!1}]}},formInfo:{ref:null,data:{id:"",pid:"",type:"",code:"",name:"",component:"",icon:"",redirect:"",sort:"",desc:"",status:1},fieldList:[{label:"所属菜单",value:"pid",type:"select",list:"treeList"},{label:"菜单类型",value:"type",type:"tag",list:"menuTypeList"},{label:"菜单编码",value:"code",type:"input"},{label:"菜单名称",value:"name",type:"input"},{label:"菜单组件",value:"component",type:"select",list:"componentList1"},{label:"菜单图标",value:"icon",type:"slot"},{label:"重定向路径",value:"redirect",type:"input"},{label:"排序",value:"sort",type:"input"},{label:"描述",value:"desc",type:"textarea"},{label:"状态",value:"status",type:"select",list:"statusList"}],rules:{},labelWidth:"120px"},dataControlFormInfo:{ref:null,data:{id:"",menu_id:"",code:"",type:"",name:"",api:"",method:""},fieldList:[{label:"所属菜单",value:"menu_id",type:"tag",list:"treeList",required:!0},{label:"功能类型",value:"type",type:"select",list:"dataControlTypeList",required:!0},{label:"功能编码",value:"code",type:"input",required:!0},{label:"功能名称",value:"name",type:"input",required:!0},{label:"功能api",value:"api",type:"input"},{label:"请求方式",value:"method",type:"select",list:"reqTypeList",required:!0}],rules:{},labelWidth:"120px"},dialogInfo:{title:{create:"添加菜单",update:"编辑菜单",persCreate:"添加菜单权限",persUpdate:"编辑菜单权限"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]}}},computed:h({},Object(s["mapGetters"])(["userInfo","dataPerms"])),watch:{menuType:{handler:function(e){this.formInfo.data.type=e},immediate:!0},"dialogInfo.visible":function(e){var t=this.formInfo,a=this.dataControlFormInfo;e||(t.ref&&t.ref.resetFields(),a.ref&&a.ref.resetFields(),this.resetForm(),this.dialogInfo.btLoading=!1)},"formInfo.data.type":function(e){var t=this.treeInfo;this.cardInfo.data={},t.loadInfo.params.data[0].value=e,t.initTree=!1,t.refresh=Math.random()},"treeInfo.baseData":function(e){this.treeInfo.treeData=this.$fn.getTreeArr({key:"id",pKey:"pid",data:e}),this.initTree(e)},tabActive:function(e){if("menuData"===e){var t=this.tableInfo;t.data=[],t.refresh=Math.random()}}},mounted:function(){this.getList(),this.initDataPerms(),this.initRules()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList;this.$initDataPerms("menuMan",e)},initRules:function(){var e=this.formInfo,t=this.dataControlFormInfo;e.rules=this.$initRules(e.fieldList),t.rules=this.$initRules(t.fieldList)},initTree:function(e){var t=this.treeInfo;t.initTree&&((t.defaultClickedAsyc||0===t.defaultClickedAsyc)&&(t.defaultClicked={id:t.defaultClickedAsyc}),(t.defaultHighLightAsyc||0===t.defaultHighLightAsyc)&&(t.defaultHighLight=t.defaultHighLightAsyc),t.defaultExpandedAsyc.length>0&&(t.defaultExpanded=t.defaultExpandedAsyc)),t.initTree||(t.initTree=!0,e[0]&&(t.defaultClicked={id:e[0].id},t.defaultHighLight=e[0].id,t.defaultExpanded=[e[0].id])),this.listTypeInfo.treeList=e.map((function(e){return e.key=e.name,e.value=e.id,e}))},getList:function(){},handleClick:function(e,t){var a=this,i=this.treeInfo,n=this.tableInfo,l=this.dialogInfo,s=this.formInfo,o=this.dataControlFormInfo;switch(e){case"persCreate":l.type=e,l.visible=!0,o.data.menu_id=i.leftClickData.id;break;case"persUpdate":for(var c in l.type=e,l.visible=!0,t)c in o.data&&(o.data[c]=t[c]);break;case"persDelete":this.$handleAPI("delete",r["c"],t.id).then((function(e){e.success&&(n.refresh=Math.random())}));break;case"close":l.visible=!1;break;case"save":var d,f,u,p=l.type;if("create"===p||"update"===p)f=s.data,u=s.ref;else{if("persCreate"!==p&&"persUpdate"!==p)return;f=o.data,u=o.ref}u.validate((function(e){if(e){if("create"===p)d=r["a"];else if("update"===p)d=r["j"];else if("persCreate"===p)d=r["b"];else{if("persUpdate"!==p)return;d=r["e"]}l.btLoading=!0,a.$handleAPI(a.getApiType(p),d,f).then((function(e){e.success&&(l.visible=!1,"create"===p?(i.defaultClickedAsyc=f.pid,i.defaultHighLightAsyc=f.pid,i.defaultExpandedAsyc=[f.pid],i.refresh=Math.random()):"update"===p?(i.defaultClickedAsyc=f.id,i.defaultHighLightAsyc=f.id,i.defaultExpandedAsyc=[f.pid],i.refresh=Math.random()):"persCreate"!==p&&"persUpdate"!==p||(n.refresh=Math.random())),l.btLoading=!1})).catch((function(e){l.btLoading=!1}))}}));break}},getApiType:function(e){return"create"===e||"update"===e?e:"persCreate"===e?"create":"persUpdate"===e?"update":void 0},handleEvent:function(e,t){var a=this,i=this.cardInfo,n=this.treeInfo,l=this.tableInfo;switch(e){case"list":if(!t)return;t.forEach((function(e){e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break;case"tabClick":"menuData"!==this.tabActive||l.initTable||(l.initTable=!0,l.refresh=!l.refresh);break;case"leftClick":var s=JSON.parse(JSON.stringify(t.data));-1===s.columns&&(s.columns="无限"),-1===s.users&&(s.users="无限"),s.create_time=this.$fn.switchTime(s.create_time,"YYYY-MM-DD hh:mm:ss"),s.update_time=this.$fn.switchTime(s.update_time,"YYYY-MM-DD hh:mm:ss"),i.data=s,n.leftClickData=s,"menuData"===this.tabActive&&(l.data=[],l.refresh=Math.random()),1!==s.component&&(this.tabActive="menu");break;case"rightClick":var r=[];r=1===t.node.level?[{name:"添加下级菜单",type:"create",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("menuMan:create")},{name:"刷新",type:"refreshTree",data:null,node:null,vm:null,show:!0}]:[{name:"添加下级菜单",type:"create",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("menuMan:create")},{name:"编辑",type:"update",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("menuMan:update")},{name:"删除",type:"delete",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("menuMan:delete")},{name:"刷新",type:"refreshTree",data:null,node:null,vm:null,show:!0}],this.treeInfo.rightMenuList=r;break;case"rightEvent":this.handleRightEvent(t.type,t);break}},handleRightEvent:function(e,t){var a=t.data,i=this.dialogInfo,n=this.formInfo,l=this.treeInfo;switch(e){case"refreshTree":case"refresh":l.initTree=!1,l.refreshLevel=t.node?t.node.level:0,l.refresh=Math.random();break;case"create":i.type=e,i.visible=!0,n.data.pid=a.id;break;case"update":for(var s in i.type=e,i.visible=!0,a)s in n.data&&(n.data[s]=a[s]);break;case"delete":this.$handleAPI(e,r["f"],a.id).then((function(e){e.success&&(l.defaultClickedAsyc=a.pid,l.defaultHighLightAsyc=a.pid,l.defaultExpandedAsyc=[a.pid],l.refresh=Math.random())}));break}},resetForm:function(){this.formInfo.data={id:"",pid:"",type:this.menuType,code:"",name:"",component:"",icon:"",redirect:"",sort:"",desc:"",status:1},this.dataControlFormInfo.data={id:"",menu_id:"",code:"",type:"",name:"",api:"",method:""}}}},v=m,y=(a("cd01"),a("2877")),g=Object(y["a"])(v,i,n,!1,null,"0926ea70",null);t["default"]=g.exports},"0f97":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"left"},[a("page-tree",{attrs:{"expand-all":!0,"load-type":1,"default-clicked":e.treeInfo.defaultClicked,"default-high-light":e.treeInfo.defaultHighLight,"default-expanded":e.treeInfo.defaultExpanded,"tree-data":e.treeInfo.treeData,"base-data":e.treeInfo.baseData,"node-key":e.treeInfo.nodeKey,"load-info":e.treeInfo.loadInfo,"right-menu-list":e.treeInfo.rightMenuList,"tree-refresh":e.treeInfo.refresh,"refresh-level":e.treeInfo.refreshLevel},on:{"update:baseData":function(t){return e.$set(e.treeInfo,"baseData",t)},"update:base-data":function(t){return e.$set(e.treeInfo,"baseData",t)},"update:loadInfo":function(t){return e.$set(e.treeInfo,"loadInfo",t)},"update:load-info":function(t){return e.$set(e.treeInfo,"loadInfo",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}})],1),e._v(" "),a("div",{staticClass:"right"},[a("page-card",{staticClass:"page-card",attrs:{title:e.cardInfo.title,data:e.cardInfo.data,"field-list":e.cardInfo.fieldList,"list-type-info":e.listTypeInfo},on:{"update:data":function(t){return e.$set(e.cardInfo,"data",t)}}})],1),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:"permissions"===e.dialogInfo.type?"80%":e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},["create"===e.dialogInfo.type||"update"===e.dialogInfo.type?a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,rules:e.formInfo.rules,"label-width":e.formInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.formInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.formInfo,"ref",t)}}}):e._e(),e._v(" "),"permissions"===e.dialogInfo.type&&e.dialogInfo.visible?a("permissions",{attrs:{"role-id":e.treeInfo.rightClickData.id,"role-p-id":e.treeInfo.rightClickData.pid,params:e.roleParams},on:{"update:params":function(t){e.roleParams=t}}}):e._e(),e._v(" "),"bindUser"===e.dialogInfo.type&&e.dialogInfo.visible?a("bind-user",{attrs:{"role-id":e.treeInfo.rightClickData.id,params:e.bindUserParams},on:{"update:params":function(t){e.bindUserParams=t}}}):e._e()],1)],1)},n=[],l=(a("8e6e"),a("ac6a"),a("456d"),a("cadf"),a("6762"),a("2fdb"),a("7f7f"),a("bd86")),s=a("5880"),r=a("176e");function o(e){return Object(r["a"])({url:"/api/role/create",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/api/role/update",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/api/role/delete/".concat(e),method:"delete"})}function f(){return Object(r["a"])({url:"/api/role/getAll",method:"get"})}function u(e){return Object(r["a"])({url:"/api/roleRelation/setPermissions",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/api/roleRelation/getPermissions",method:"get",params:e})}function b(e){return Object(r["a"])({url:"/api/roleRelation/setBindUser",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/api/roleRelation/getBindUser",method:"get",params:e})}var m=a("6169"),v=a("2e97"),y=a("0d40"),g=a("5ccc"),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"permissions"},[a("el-tabs",{model:{value:e.menuType,callback:function(t){e.menuType=t},expression:"menuType"}},e._l(e.listTypeInfo.menuTypeList,(function(t,i){return a("el-tab-pane",{key:i,staticClass:"tab",attrs:{label:t.key,name:t.value+""}},[t.value+""===e.menuType?[a("div",{staticClass:"left"},[a("page-tree",{attrs:{"expand-all":!0,"check-box":!0,"load-type":1,"default-clicked":e.treeInfo.defaultClicked,"default-high-light":e.treeInfo.defaultHighLight,"default-expanded":e.treeInfo.defaultExpanded,"default-checked":e.treeInfo.defaultChecked,"tree-data":e.treeInfo.treeData,"base-data":e.treeInfo.baseData,"node-key":e.treeInfo.nodeKey,"load-info":e.treeInfo.loadInfo,"right-menu-list":e.treeInfo.rightMenuList,"tree-refresh":e.treeInfo.refresh,"refresh-level":e.treeInfo.refreshLevel},on:{"update:baseData":function(t){return e.$set(e.treeInfo,"baseData",t)},"update:base-data":function(t){return e.$set(e.treeInfo,"baseData",t)},"update:loadInfo":function(t){return e.$set(e.treeInfo,"loadInfo",t)},"update:load-info":function(t){return e.$set(e.treeInfo,"loadInfo",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}})],1),e._v(" "),a("div",{staticClass:"right"},[a("page-table",{directives:[{name:"show",rawName:"v-show",value:1===e.treeInfo.leftClickData.component,expression:"treeInfo.leftClickData.component === 1"}],class:"table",attrs:{"listen-height":!1,"check-box":!0,refresh:e.tableInfo.refresh,pager:e.tableInfo.pager,data:e.tableInfo.data,"checked-list":e.roleRelation.permissions,api:e.getRoleDataPermsApi,query:{menuId:e.treeInfo.leftClickData.id},"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:1!==e.treeInfo.leftClickData.component,expression:"treeInfo.leftClickData.component !== 1"}],staticClass:"tips"},[e._v("\n            选择功能页面可查看相关数据权限\n          ")])],1)]:e._e()],2)})),1)],1)},k=[],w=(a("5df3"),a("4f7f"),a("75fc")),L=(a("ac4d"),a("8a81"),a("c5f6"),a("f7a6")),O=a("e94a");function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j={components:{PageTree:m["a"],PageTable:O["a"]},props:{roleId:{type:Number},rolePId:{type:Number},params:{type:Object,default:function(){return{menu:[],permissions:[],roleId:""}}}},data:function(){return{getRoleDataPermsApi:L["h"],menuType:"",listTypeInfo:{statusList:[{key:"启用",value:1},{key:"停用",value:0}],menuTypeList:[{key:"平台端",value:1,status:!1},{key:"论坛端",value:2,status:!1},{key:"移动端",value:3,status:!1}],componentsList:[{key:"根目录",value:-1},{key:"页面组件",value:1},{key:"默认布局组件",value:2}],dataControlTypeList:[{key:"按钮点击",value:1},{key:"右键菜单",value:2},{key:"链接访问",value:3}],reqTypeList:[{key:"GET",value:1},{key:"POST",value:2},{key:"PUT",value:3},{key:"DELETE",value:4}],treeList:[]},treeInfo:{initTree:!1,refresh:1,nodeKey:"key",defaultClicked:{},defaultHighLight:"",defaultExpanded:[],defaultChecked:[],defaultClickedAsyc:"",defaultHighLightAsyc:"",defaultExpandedAsyc:[],treeData:[],baseData:[],loadInfo:{key:"id",pKey:"pid",label:"name",api:L["i"],params:{data:[{key:"type",value:1},{key:"roleId",value:this.rolePId}],type:"query"},resFieldList:["content"]},leftClickData:{}},tableInfo:{refresh:1,initTable:!1,initCurpage:1,pager:!1,data:[],fieldList:[{label:"所属菜单",value:"menu_id",list:"treeList",required:!0},{label:"触发类型",value:"type",list:"dataControlTypeList",required:!0},{label:"功能名称",value:"name",required:!0}]},roleRelation:{menu:[],permissions:[]}}},computed:C({},Object(s["mapGetters"])(["userInfo"])),watch:{menuType:function(e){var t=this.treeInfo;t.loadInfo.params.data[0].value=e,t.initTree=!1},"treeInfo.baseData":function(e){this.treeInfo.treeData=this.$fn.getTreeArr({key:"id",pKey:"pid",data:e}),this.initTree(e),this.getPermissions()},roleId:{handler:function(e){e&&this.$emit("update:params",C({},this.params,{},{roleId:e}))},immediate:!0}},created:function(){this.menuType="1"},methods:{initTree:function(e){var t=this.treeInfo;e.forEach((function(e){-1===e.pid&&(e.disabled=!0)})),t.initTree||(t.initTree=!0,e[0]&&(t.defaultClicked={id:e[0].id},t.defaultHighLight=e[0].id,t.defaultExpanded=[e[0].id])),this.listTypeInfo.treeList=e.map((function(e){return e.key=e.name,e.value=e.id,e}))},getPermissions:function(){var e=this;p({roleId:this.roleId}).then((function(t){t.success?function(){var a=t.content,i=a.menu,n=!0,l=!1,s=void 0;try{for(var r,o=function(){var e=r.value;i.forEach((function(t,a){var n;e.pid===t&&(n=a),i.forEach((function(e,t){e===i[n]&&i.splice(t,1)}))}))},c=e.treeInfo.baseData[Symbol.iterator]();!(n=(r=c.next()).done);n=!0)o()}catch(d){l=!0,s=d}finally{try{n||null==c.return||c.return()}finally{if(l)throw s}}e.treeInfo.defaultChecked=i,e.roleRelation.permissions=a.permissions}():e.$message({showClose:!0,message:t.message,type:t.success?"success":"error",duration:3500})}))},handleClick:function(e,t){switch(e){case"save":break}},handleEvent:function(e,t){var a=this.treeInfo,i=this.tableInfo,n=this.roleRelation;switch(e){case"leftClick":i.data=[],i.refresh=Math.random(),a.leftClickData=JSON.parse(JSON.stringify(t.data));break;case"treeCheck":n.menu=t.keys,this.$emit("update:params",C({},this.params,{},n));break;case"tableCheck":var l=[],s=[],r=JSON.parse(JSON.stringify(n.permissions));0===t.length?s=this.tableInfo.data.map((function(e){return e.id})):this.tableInfo.data.forEach((function(e){var a=0;t.forEach((function(t,i){t&&t.id&&(l.push(t.id),e.id!==t.id&&a++)})),a===t.length&&s.push(e.id)})),s.forEach((function(e){-1!==r.indexOf(e)&&r.splice(r.indexOf(e),1)})),n.permissions=Object(w["a"])(new Set(l.concat(r))),this.$emit("update:params",C({},this.params,{},n));break}}}},P=j,T=(a("2554"),a("2877")),D=Object(T["a"])(P,I,k,!1,null,"729d220e",null),$=D.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bind-user"},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入用户名","remote-method":e.handleSearchUser,loading:e.loading},model:{value:e.bindUserList,callback:function(t){e.bindUserList=t},expression:"bindUserList"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)},x=[],M=(a("551c"),a("4de7"));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F={props:{roleId:{type:Number},params:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,timerList:[],bindUserList:[],userList:[]}},computed:q({},Object(s["mapGetters"])(["userInfo"])),watch:{bindUserList:function(e){this.$emit("update:params",{roleId:this.roleId,user:e})}},created:function(){var e=this;this.initUserList().then((function(){e.getBindUser()}))},methods:{initUserList:function(){var e=this;return new Promise((function(t,a){Object(M["c"])().then((function(i){i.success?(e.userList=i.content,t()):(e.$message({showClose:!0,message:i.message,type:i.success?"success":"error",duration:3500}),a())})).catch((function(e){a(e)}))}))},getBindUser:function(){var e=this;h({roleId:this.roleId}).then((function(t){t.success?e.bindUserList=t.content.map((function(e){return e.id})):e.$message({showClose:!0,message:t.message,type:t.success?"success":"error",duration:3500})}))},handleSearchUser:function(e){var t=this;if(""!==e){this.loading=!0,this.timerList.forEach((function(e){clearTimeout(e)})),this.timerList=[];var a=setTimeout((function(){t.loading=!1,Object(M["c"])({name:e,create_user:1===t.userInfo.id?"":t.userInfo.id}).then((function(e){e.success?t.userList=e.content:t.$message({showClose:!0,message:e.message,type:e.success?"success":"error",duration:3500})}))}),500);this.timerList.push(a)}else this.userList=[]}}},S=F,Y=(a("5027"),Object(T["a"])(S,E,x,!1,null,"5ee2198c",null)),N=Y.exports;function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var H={components:{PageTree:m["a"],PageCard:v["a"],PageDialog:y["a"],PageForm:g["a"],Permissions:$,BindUser:N},data:function(){return{createApi:o,updateApi:c,deleteApi:d,getAllApi:f,listTypeInfo:{statusList:[{key:"启用",value:1},{key:"停用",value:0}],treeList:[]},roleParams:{},bindUserParams:{},treeInfo:{initTree:!1,refresh:1,nodeKey:"key",defaultClicked:{},defaultHighLight:"",defaultExpanded:[],defaultClickedAsyc:"",defaultHighLightAsyc:"",defaultExpandedAsyc:[],treeData:[],baseData:[],loadInfo:{key:"id",label:"name",api:f,resFieldList:["content"]},leftClickData:{},rightClickData:{},rightMenuList:[]},cardInfo:{title:"角色详情",data:{},fieldList:[{label:"所属角色",value:"pName"},{label:"角色名称",value:"name"},{label:"可创建专栏数",value:"columns"},{label:"可创建用户数",value:"users"},{label:"描述",value:"desc"},{label:"状态",value:"status",list:"statusList"},{label:"创建人",value:"create_user_name"},{label:"创建时间",value:"create_time"},{label:"更新人",value:"update_user_name"},{label:"更新时间",value:"update_time"}]},formInfo:{data:{id:"",pid:"",name:"",columns:1,users:10,desc:"",status:1},fieldList:[{label:"所属角色",value:"pid",type:"tag",list:"treeList",required:!0},{label:"名称",value:"name",type:"input",required:!0},{label:"可创建专栏数",value:"columns",type:"inputNumber",min:1,max:1,required:!0},{label:"可创建用户数",value:"users",type:"inputNumber",min:1,max:10,required:!0},{label:"描述",value:"desc",type:"textarea",className:"el-form-block"},{label:"状态",value:"status",type:"select",list:"statusList",required:!0}],rules:{},labelWidth:"120px"},dialogInfo:{title:{create:"添加",update:"编辑",bindUser:"绑定用户",permissions:"分配权限"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]}}},computed:U({},Object(s["mapGetters"])(["userInfo","dataPerms"])),watch:{"dialogInfo.visible":function(e){var t=this.formInfo;e||(t.ref&&t.ref.resetFields(),this.resetForm(),this.dialogInfo.btLoading=!1)},"treeInfo.baseData":function(e){this.treeInfo.treeData=this.$fn.getTreeArr({key:"id",pKey:"pid",data:e}),this.initTree(e)}},mounted:function(){this.getList(),this.initRules()},methods:{initDataPerms:function(){},initRules:function(){var e=this.formInfo;e.rules=this.$initRules(e.fieldList)},initTree:function(e){var t=this.treeInfo;t.initTree&&((t.defaultClickedAsyc||0===t.defaultClickedAsyc)&&(t.defaultClicked={id:t.defaultClickedAsyc}),(t.defaultHighLightAsyc||0===t.defaultHighLightAsyc)&&(t.defaultHighLight=t.defaultHighLightAsyc),t.defaultExpandedAsyc.length>0&&(t.defaultExpanded=t.defaultExpandedAsyc)),t.initTree||(t.initTree=!0,e[0]&&(t.defaultClicked={id:e[0].id},t.defaultHighLight=e[0].id,t.defaultExpanded=[e[0].id])),this.listTypeInfo.treeList=e.map((function(e){return e.key=e.name,e.value=e.id,e})),this.listTypeInfo.treeList.unshift({key:"admin",value:0})},getList:function(){},handleClick:function(e,t){var a=this,i=this.treeInfo,n=this.dialogInfo,l=this.formInfo;switch(e){case"close":n.visible=!1;break;case"save":if("permissions"===n.type)return n.btLoading=!0,void u(this.roleParams).then((function(e){e.success&&(n.visible=!1),a.$message({showClose:!0,message:e.message,type:e.success?"success":"error",duration:3500}),n.btLoading=!1})).catch((function(){n.btLoading=!1}));if("bindUser"===n.type)return n.btLoading=!0,void b(this.bindUserParams).then((function(e){e.success&&(n.visible=!1),a.$message({showClose:!0,message:e.message,type:e.success?"success":"error",duration:3500}),n.btLoading=!1})).catch((function(){n.btLoading=!1}));l.ref.validate((function(e){if(e){var t,s=l.data,r=n.type;if("create"===r)t=o;else{if("update"!==r)return;t=c}n.btLoading=!0,a.$handleAPI(r,t,s).then((function(e){e.success&&(n.visible=!1,i.refresh=Math.random(),"create"===r?(i.defaultClickedAsyc=s.pid,i.defaultHighLightAsyc=s.pid,i.defaultExpandedAsyc=[s.pid]):"update"===r&&(i.defaultClickedAsyc=s.id,i.defaultHighLightAsyc=s.id,i.defaultExpandedAsyc=[s.pid])),n.btLoading=!1})).catch((function(e){n.btLoading=!1}))}}));break}},handleEvent:function(e,t){var a=this.cardInfo,i=this.treeInfo;switch(e){case"list":break;case"leftClick":var n=JSON.parse(JSON.stringify(t.data));-1===n.columns&&(n.columns="无限"),-1===n.users&&(n.users="无限"),n.create_time=this.$fn.switchTime(n.create_time,"YYYY-MM-DD hh:mm:ss"),n.update_time=this.$fn.switchTime(n.update_time,"YYYY-MM-DD hh:mm:ss"),a.data=n;break;case"rightClick":var l=[];l=1===t.node.level?[{name:"添加下级角色",type:"create",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("roleMan:create")},{name:"刷新",type:"refreshTree",data:null,node:null,vm:null,show:!0}]:[{name:"添加下级角色",type:"create",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("roleMan:create")},{name:"编辑",type:"update",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("roleMan:update")},{name:"删除",type:"delete",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("roleMan:delete")},{name:"绑定用户",type:"bindUser",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("roleMan:bindUser")},{name:"分配权限",type:"permissions",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("roleMan:permissions")},{name:"刷新",type:"refreshTree",data:null,node:null,vm:null,show:!0}],i.rightMenuList=l,i.rightClickData=JSON.parse(JSON.stringify(t.data));break;case"rightEvent":this.handleRightEvent(t.type,t);break}},handleRightEvent:function(e,t){var a=t.data,i=this.dialogInfo,n=this.formInfo,l=this.treeInfo;switch(e){case"refreshTree":case"refresh":l.initTree=!1,l.refreshLevel=t.node?t.node.level:0,l.refresh=Math.random();break;case"create":i.type=e,i.visible=!0,n.data.pid=a.id;break;case"update":for(var s in i.type=e,i.visible=!0,a)s in n.data&&(n.data[s]=a[s]);break;case"delete":this.$handleAPI(e,d,a.id).then((function(e){e.success&&(l.defaultClickedAsyc=a.pid,l.defaultHighLightAsyc=a.pid,l.defaultExpandedAsyc=[a.pid],l.refresh=Math.random())}));break;case"bindUser":i.type=e,i.title[e]="绑定用户(".concat(l.rightClickData.name,")"),i.visible=!0;break;case"permissions":i.type=e,i.title[e]="分配权限(".concat(l.rightClickData.name,")"),i.visible=!0;break}},resetForm:function(){this.formInfo.data={id:"",pid:"",name:"",columns:1,users:10,desc:"",status:1}}}},W=H,z=Object(T["a"])(W,i,n,!1,null,"53dc8bae",null);t["default"]=z.exports},"132f":function(e,t,a){"use strict";var i=a("5ab6"),n=a.n(i);n.a},"23cd":function(e,t,a){"use strict";var i=a("2e9e"),n=a.n(i);n.a},2554:function(e,t,a){"use strict";var i=a("61b2"),n=a.n(i);n.a},"29b6":function(e,t,a){},"2e51":function(e,t,a){"use strict";var i=a("fc18"),n=a.n(i);n.a},"2e97":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"page-card",class:e.className},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title",style:"color: "+e.theme},[e._v(e._s(e.title))]),e._v(" "),a("i",{staticClass:"el-icon-info",staticStyle:{float:"right",padding:"3px 0",color:"rgb(150, 150, 150)"},attrs:{title:e.title}})]),e._v(" "),a("ul",{staticClass:"info"},e._l(e.fieldList,(function(t,i){return a("li",{key:i,staticClass:"item"},[a("span",{staticClass:"label",style:"width: "+e.lableWidth+"; text-align: "+e.textAligin+";"},[e._v(e._s(t.label))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.$fn.getDataName({dataList:e.listTypeInfo[t.list],value:"value",label:"key",data:e.data[t.value]})||"-"))])])})),0)])},n=[],l=(a("8e6e"),a("ac6a"),a("456d"),a("cadf"),a("bd86")),s=a("5880");function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={props:{className:{type:String},title:{type:String},textAligin:{type:String,default:"left"},lableWidth:{type:String,default:"100px"},data:{type:Object},fieldList:{type:Array},listTypeInfo:{type:Object}},computed:o({},Object(s["mapGetters"])(["theme"]))},d=c,f=(a("132f"),a("2877")),u=Object(f["a"])(d,i,n,!1,null,"48c462ae",null);t["a"]=u.exports},"2e9e":function(e,t,a){},"32cc":function(e,t,a){"use strict";var i=a("0e54"),n=a.n(i);t["a"]=function(e){if(e){var t=new n.a.Renderer;return n.a.setOptions({renderer:t,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1}),n()(e)}}},"3bc2":function(e,t,a){"use strict";var i=a("f987"),n=a.n(i);n.a},"400a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e._v("\n  流程设计\n")])},n=[],l={},s=l,r=a("2877"),o=Object(r["a"])(s,i,n,!1,null,"1b5b0c47",null);t["default"]=o.exports},"451a":function(e,t,a){"use strict";var i=a("7b77"),n=a.n(i);n.a},"470b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  1\n")])},n=[],l={},s=l,r=a("2877"),o=Object(r["a"])(s,i,n,!1,null,"de879b0c",null);t["default"]=o.exports},"4e05":function(e,t,a){},5027:function(e,t,a){"use strict";var i=a("5762"),n=a.n(i);n.a},"51ad":function(e,t,a){"use strict";var i=a("8a70"),n=a.n(i);n.a},5762:function(e,t,a){},"5ab6":function(e,t,a){},"60c2":function(e,t,a){"use strict";var i=a("4e05"),n=a.n(i);n.a},"61b2":function(e,t,a){},"624f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"left"},[a("page-tree",{attrs:{"expand-all":!0,"load-type":1,"default-clicked":e.treeInfo.defaultClicked,"default-high-light":e.treeInfo.defaultHighLight,"default-expanded":e.treeInfo.defaultExpanded,"tree-data":e.treeInfo.treeData,"base-data":e.treeInfo.baseData,"node-key":e.treeInfo.nodeKey,"load-info":e.treeInfo.loadInfo,"right-menu-list":e.treeInfo.rightMenuList,"tree-refresh":e.treeInfo.refresh,"refresh-level":e.treeInfo.refreshLevel},on:{"update:baseData":function(t){return e.$set(e.treeInfo,"baseData",t)},"update:base-data":function(t){return e.$set(e.treeInfo,"baseData",t)},"update:loadInfo":function(t){return e.$set(e.treeInfo,"loadInfo",t)},"update:load-info":function(t){return e.$set(e.treeInfo,"loadInfo",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}})],1),e._v(" "),a("div",{staticClass:"right"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}})],1),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":"uploadFile"===e.dialogInfo.type?void 0:e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},["create"===e.dialogInfo.type||"update"===e.dialogInfo.type?a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,rules:e.formInfo.rules,"label-width":e.formInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.formInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.formInfo,"ref",t)}}}):"updateFile"===e.dialogInfo.type?a("page-form",{attrs:{"ref-obj":e.fileFormInfo.ref,data:e.fileFormInfo.data,"field-list":e.fileFormInfo.fieldList,rules:e.fileFormInfo.rules,"label-width":e.fileFormInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.fileFormInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.fileFormInfo,"ref",t)}}}):"uploadFile"===e.dialogInfo.type&&e.dialogInfo.visible?a("Upload",{attrs:{"upload-data":{fid:e.treeInfo.rightClickData.id,type:e.treeInfo.rightClickData.type}},on:{handleEvent:e.handleEvent}}):e._e()],1)],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("6762"),a("2fdb"),a("ac6a"),a("7f7f"),a("bd86")),s=a("5880"),r=a("3657"),o=a("43f9"),c=a("6169"),d=a("5f8b"),f=a("e94a"),u=a("0d40"),p=a("5ccc"),b=a("c7f0");function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={components:{PageTree:c["a"],PageFilter:d["a"],PageTable:f["a"],PageDialog:u["a"],PageForm:p["a"],Upload:b["a"]},data:function(){return{createApi:r["a"],updateApi:r["d"],deleteApi:r["b"],getAllApi:r["c"],getListApi:o["c"],listTypeInfo:{iconList:[],statusList:[{key:"启用",value:1},{key:"停用",value:0}],treeList:[]},treeInfo:{initTree:!1,refresh:1,nodeKey:"key",defaultClicked:{},defaultHighLight:"",defaultExpanded:[],defaultClickedAsyc:"",defaultHighLightAsyc:"",defaultExpandedAsyc:[],treeData:[],baseData:[],loadInfo:{key:"id",pKey:"pid",label:"name",api:r["c"],params:{data:[{key:"type",value:2}],type:"query"},resFieldList:["content"]},leftClickData:{},rightClickData:{},rightMenuList:[]},filterInfo:{query:{name:"",suffix:"",f_id:"",type:2},list:[{type:"input",label:"图片名称",value:"name"},{type:"input",label:"图片类型",value:"suffix"},{type:"select",label:"所在目录",value:"f_id",list:"treeList"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0}]},tableInfo:{refresh:1,initTable:!1,initCurpage:1,pager:!1,data:[],fieldList:[{label:"所属目录",value:"f_id",list:"treeList"},{label:"图片",value:"completePath",type:"image"},{label:"图片名称",value:"name"},{label:"图片类型",value:"suffix",type:"tag"},{label:"图片大小",value:"size"},{label:"创建时间",value:"create_time",width:180},{label:"更新时间",value:"update_time",width:180}],handle:{fixed:"right",label:"操作",width:"300",btList:[{label:"复制地址",type:"primary",icon:"el-icon-ship",event:"copyFile",show:!0},{label:"编辑",type:"",icon:"el-icon-edit",event:"updateFile",show:!1},{label:"删除",type:"danger",icon:"el-icon-delete",event:"deleteFile",show:!1}]}},formInfo:{ref:null,data:{id:"",pid:"",name:"",type:2,sort:"",desc:""},fieldList:[{label:"所属目录",value:"pid",type:"tag",list:"treeList",required:!0},{label:"目录名称",value:"name",type:"input",required:!0},{label:"排序",value:"sort",type:"input",required:!0},{label:"描述",value:"desc",type:"textarea",className:"el-form-block"}],rules:{},labelWidth:"120px"},fileFormInfo:{ref:null,data:{id:"",f_id:"",name:"",type:2,desc:""},fieldList:[{label:"所属目录",value:"f_id",type:"tag",list:"treeList",required:!0},{label:"图片名称",value:"name",type:"input",required:!0}],rules:{},labelWidth:"120px"},dialogInfo:{title:{create:"添加目录",update:"编辑目录",uploadFile:"上传图片",updateFile:"编辑图片"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]}}},computed:m({},Object(s["mapGetters"])(["userInfo","dataPerms"])),watch:{"dialogInfo.visible":function(e){var t=this.formInfo,a=this.fileFormInfo;e||(t.ref&&t.ref.resetFields(),a.ref&&a.ref.resetFields(),this.resetForm(),this.dialogInfo.btLoading=!1)},"treeInfo.baseData":function(e){this.treeInfo.treeData=this.$fn.getTreeArr({key:"id",pKey:"pid",data:e}),this.initTree(e)}},mounted:function(){this.getList(),this.initDataPerms(),this.initRules()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList;this.$initDataPerms("imgMan",e)},initRules:function(){var e=this.formInfo,t=this.fileFormInfo;e.rules=this.$initRules(e.fieldList),t.rules=this.$initRules(t.fieldList)},initTree:function(e){var t=this.treeInfo;t.initTree||((t.defaultClickedAsyc||0===t.defaultClickedAsyc)&&(t.defaultClicked={id:t.defaultClickedAsyc}),(t.defaultHighLightAsyc||0===t.defaultHighLightAsyc)&&(t.defaultHighLight=t.defaultHighLightAsyc),t.defaultExpandedAsyc.length>0&&(t.defaultExpanded=t.defaultExpandedAsyc)),this.listTypeInfo.treeList=e.map((function(e){return e.key=e.name,e.value=e.id,e}))},getList:function(){this.tableInfo.refresh=Math.random()},handleClick:function(e,t){var a=this,i=this.treeInfo,n=this.tableInfo,l=this.dialogInfo,s=this.formInfo,c=this.fileFormInfo,d=this.filterInfo;switch(e){case"search":n.initCurpage=Math.random(),n.refresh=Math.random(),i.defaultClicked={id:d.query.f_id},i.defaultHighLight=d.query.f_id||null;break;case"updateFile":for(var f in l.type=e,l.visible=!0,t)f in c.data&&(c.data[f]=t[f]);break;case"deleteFile":this.$handleAPI("delete",o["a"],t.id).then((function(e){e.success&&(n.refresh=Math.random())}));break;case"close":l.visible=!1;break;case"save":var u,p,b,h=l.type;if("create"===h||"update"===h)p=s.data,b=s.ref;else{if("uploadFile"!==h&&"updateFile"!==h)return;p=c.data,b=c.ref}b.validate((function(e){if(e){if("create"===h)u=r["a"];else if("update"===h)u=r["d"];else if("uploadFile"===h);else{if("updateFile"!==h)return;u=o["d"]}l.btLoading=!0,a.$handleAPI(a.getApiType(h),u,p).then((function(e){e.success&&(l.visible=!1,"create"===h?(i.defaultClickedAsyc=p.pid,i.defaultHighLightAsyc=p.pid,i.defaultExpandedAsyc=[p.pid],i.refresh=Math.random()):"update"===h?(i.defaultClickedAsyc=p.id,i.defaultHighLightAsyc=p.id,i.defaultExpandedAsyc=[p.pid],i.refresh=Math.random()):"uploadFile"!==h&&"updateFile"!==h||(n.refresh=Math.random())),l.btLoading=!1})).catch((function(e){l.btLoading=!1}))}}));break;case"copyFile":this.$fn.copyData(t.completePath);break}},getApiType:function(e){return"create"===e||"update"===e?e:"uploadFile"===e?"create":"updateFile"===e?"update":void 0},handleEvent:function(e,t){var a=this,i=this.treeInfo,n=this.tableInfo,l=this.filterInfo;switch(e){case"list":if(!t)return;t.forEach((function(e){e.size=a.$fn.bytesToSize(e.size),e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break;case"leftClick":var s=JSON.parse(JSON.stringify(t.data));i.leftClickData=s,n.initCurpage=Math.random(),n.refresh=Math.random(),l.query.f_id=s.id;break;case"rightClick":var r=[];r=1===t.node.level?[{name:"添加下级目录",type:"create",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("imgMan:create")},{name:"刷新",type:"refreshTree",data:null,node:null,vm:null,show:!0}]:[{name:"上传图片",type:"uploadFile",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("imgMan:upload")},{name:"编辑",type:"update",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("imgMan:update")},{name:"删除",type:"delete",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("imgMan:delete")},{name:"刷新",type:"refreshTree",data:null,node:null,vm:null,show:!0}],this.treeInfo.rightMenuList=r,i.rightClickData=JSON.parse(JSON.stringify(t.data));break;case"rightEvent":this.handleRightEvent(t.type,t);break;case"upload":t&&(l.query.f_id=i.rightClickData.id,i.defaultClicked={id:l.query.f_id},i.defaultHighLight=l.query.f_id,n.refresh=Math.random(),this.handleClick("close"));break}},handleRightEvent:function(e,t){var a=t.data,i=this.dialogInfo,n=this.formInfo,l=this.treeInfo,s=this.fileFormInfo;switch(e){case"refreshTree":case"refresh":l.initTree=!1,l.refreshLevel=t.node?t.node.level:0,l.refresh=Math.random();break;case"uploadFile":i.type=e,i.visible=!0,s.data.f_id=a.id;break;case"create":i.type=e,i.visible=!0,n.data.pid=a.id;break;case"update":for(var o in i.type=e,i.visible=!0,a)o in n.data&&(n.data[o]=a[o]);break;case"delete":this.$handleAPI(e,r["b"],a.id).then((function(e){e.success&&(l.defaultClickedAsyc=a.pid,l.defaultHighLightAsyc=a.pid,l.defaultExpandedAsyc=[a.pid],l.refresh=Math.random())}));break}},resetForm:function(){this.formInfo.data={id:"",pid:"",name:"",type:2,sort:"",desc:""},this.fileFormInfo.data={id:"",f_id:"",name:"",type:2,desc:""}}}},y=v,g=a("2877"),I=Object(g["a"])(y,i,n,!1,null,"2baa3fea",null);t["default"]=I.exports},6490:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"left"},[a("page-tree",{attrs:{"base-data":e.treeInfo.baseData,"node-key":e.treeInfo.nodeKey,"load-type":2,"lazy-info":e.treeInfo.lazyInfo,"right-menu-list":e.treeInfo.rightMenuList,"tree-refresh":e.treeInfo.refresh,"refresh-level":e.treeInfo.refreshLevel},on:{"update:baseData":function(t){return e.$set(e.treeInfo,"baseData",t)},"update:base-data":function(t){return e.$set(e.treeInfo,"baseData",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}})],1),e._v(" "),a("div",{staticClass:"right"},[a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent},scopedSlots:e._u([{key:"col-status",fn:function(e){return[a("i",{class:1===e.row.status?"el-icon-check":"el-icon-close",style:{color:1===e.row.status?"#67c23a":"#f56c6c",fontSize:"20px"}})]}},{key:"bt-status",fn:function(t){return[!t.data.item.show||t.data.item.ifRender&&!t.data.item.ifRender(t.data.row)?e._e():a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:t.data.row.status-1>=0?"danger":"success",icon:t.data.item.icon,disabled:t.data.item.disabled,loading:t.data.row[t.data.item.loading]},on:{click:function(a){return e.handleClick(t.data.item.event,t.data.row)}}},[e._v("\n          "+e._s(t.data.row.status-1>=0?"停用":"启用")+"\n        ")])]}}])})],1)])},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("6762"),a("2fdb"),a("ac4d"),a("8a81"),a("ac6a"),a("bd86")),s=a("5880"),r=a("176e");function o(e){return Object(r["a"])({url:"/api/area/update",method:"put",data:e})}function c(e){return Object(r["a"])({url:"/api/area/getList",method:"get",params:e})}function d(e){return Object(r["a"])({url:"/api/area/getAll/".concat(e),method:"get"})}var f=a("6169"),u=a("e94a");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={components:{PageTree:f["a"],PageTable:u["a"]},data:function(){return{getListApi:c,updateApi:o,getAllApi:d,listTypeInfo:{statusList:[{key:"启用",value:1},{key:"停用",value:0}]},treeInfo:{refresh:1,refreshLevel:0,nodeKey:"key",lazy:!0,type:0,baseData:[],lazyInfo:[{key:"id",label:"name",type:1,api:d,params:{key:"pid",value:1,type:"url"},resFieldList:["content"]},{key:"id",label:"name",type:2,api:d,params:{key:"pid",value:"",type:"url"},resFieldList:["content"],leaf:!0}],rightMenuList:[]},filterInfo:{query:{pid:1}},tableInfo:{refresh:1,initCurpage:1,data:[],fieldList:[{label:"名称",value:"name"},{label:"级别",value:"level"},{label:"状态",value:"status",type:"slot",width:80}],handle:{fixed:"right",label:"操作",width:"100",btList:[{label:"启用",type:"success",icon:"el-icon-albb-process",event:"status",loading:"statusLoading",show:!1,slot:!0}]}}}},computed:b({},Object(s["mapGetters"])(["userInfo","dataPerms"])),watch:{"tableInfo.data":function(e){this.setList(this.treeInfo.type)}},mounted:function(){this.getList(),this.initDataPerms()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList,t=!0,a=!1,i=void 0;try{for(var n,l=e[Symbol.iterator]();!(t=(n=l.next()).done);t=!0){var s=n.value;this.dataPerms.includes("areaMan:"+s.event)&&(s.show=!0)}}catch(r){a=!0,i=r}finally{try{t||null==l.return||l.return()}finally{if(a)throw i}}},getList:function(){this.tableInfo.refresh=Math.random()},handleClick:function(e,t){switch(e){case"status":var a=JSON.parse(JSON.stringify(t));a.status=a.status-1>=0?0:1,t.statusLoading=!0,delete a.statusLoading,this.$handleAPI("update",o,a).then((function(e){t.statusLoading=!1,e.success&&(t.status=a.status)})).catch((function(){t.statusLoading=!1}));break}},handleEvent:function(e,t){var a=this,i=this.tableInfo,n=this.treeInfo,l=this.filterInfo;switch(e){case"list":if(!t)return;t.forEach((function(e){a.$set(e,"statusLoading",!1)}));break;case"leftClick":n.type=t.data.type+1,l.query.pid=t.data.id,i.initCurpage=Math.random(),i.refresh=Math.random();break;case"rightClick":n.rightMenuList=[{name:"刷新",type:"refreshTree",data:null,node:null,vm:null}];break;case"rightEvent":this.handleRightEvent(t.type,t);break}},handleRightEvent:function(e,t){var a=this.tableInfo,i=this.treeInfo,n=this.filterInfo;switch(e){case"refreshTree":n.query.pid=1,a.initCurpage=Math.random(),a.refresh=Math.random();case"refresh":i.refreshLevel=t.node?t.node.level:0,i.refresh=Math.random();break}},setList:function(e){var t="";switch(e){case 0:t="省";break;case 1:t="省";break;case 2:t="市";break;case 3:t="区";break}this.tableInfo.data.forEach((function(e){e.level=t}))}}},m=h,v=a("2877"),y=Object(v["a"])(m,i,n,!1,null,"567be274",null);t["default"]=y.exports},6993:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tooltip",{attrs:{effect:"dark",content:"使用引导",placement:"bottom"}},[a("i",{staticClass:"el-icon-question",style:"font-size:"+e.fontSize,on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.guide()}}})])},n=[],l=a("c24c"),s=(a("01d7"),[{element:".hamburger-wrapper",popover:{title:"菜单切换",description:"展开或者收起菜单",position:"right"}},{element:".breadcrumb-wrapper",popover:{title:"当前位置",description:"显示您当前访问的目录",position:"right"}},{element:".tags-wrapper",popover:{title:"标签页",description:"记录您访问过的目录",position:"bottom"}},{element:".theme-switch",popover:{title:"取色器",description:"用来更换主题皮肤",position:"left"}},{element:".userInfo",popover:{title:"当前用户",description:"当前用户信息展示以及一般操作",position:"left"}}]),r=s,o={name:"Guide",props:{fontSize:{type:String,default:"24px"}},data:function(){return{driver:null}},mounted:function(){this.driver=new l},methods:{guide:function(){this.driver.defineSteps(r),this.driver.start()}}},c=o,d=(a("3bc2"),a("2877")),f=Object(d["a"])(c,i,n,!1,null,"2dd59c02",null);t["default"]=f.exports},"6f27":function(e,t,a){var i={"./HOWTOUSE/index":"c6c3","./bbsConfig/carousel/index":"a420","./bbsConfig/notices/index":"e0b0","./bbsConfig/tagMan/index":"f48a","./bbsConfig/tagTypeMan/index":"f49b","./bbsConfig/techSquare/index":"8971","./home/index":"7abe","./layout/components/Guide/index":"6993","./layout/components/Navbar/index":"c88e","./layout/components/Sidebar/index":"30c6","./layout/components/index":"38e2","./layout/index":"162e","./library/fileMan/index":"d6cb","./library/imgMan/index":"624f","./login/index":"9ed6","./opsCenter/activityMan/index":"c492","./opsCenter/advertisingMan/index":"470b","./opsCenter/articleMan/index":"bb38","./opsCenter/columnMan/index":"c402","./opsCenter/liveMan/index":"e61b","./opsCenter/questionMan/index":"f4e6","./redirect/index":"ef3c","./retrieve/index":"e985","./sysMan/areaMan/index":"6490","./sysMan/chartConfig/index":"8b47","./sysMan/log/index":"e5f4","./sysMan/menuMan/index":"0f33","./sysMan/roleMan/index":"0f97","./sysMan/topicMan/index":"db26","./sysMan/userMan/index":"0ded","./workflow/businessMan/index":"a8e4","./workflow/finishedItems/index":"dceb","./workflow/processDesign/index":"400a","./workflow/unfinishedItems/index":"7534"};function n(e){var t=l(e);return a(t)}function l(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=l,e.exports=n,n.id="6f27"},"721f":function(e,t,a){"use strict";var i=a("960f"),n=a.n(i);n.a},"72a1":function(e,t,a){"use strict";var i=a("8e19"),n=a.n(i);n.a},7534:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e._v("\n  未办事项\n")])},n=[],l={},s=l,r=a("2877"),o=Object(r["a"])(s,i,n,!1,null,"1a87d4e4",null);t["default"]=o.exports},"777d":function(e,t,a){"use strict";var i=a("29b6"),n=a.n(i);n.a},"7b77":function(e,t,a){},8971:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent},scopedSlots:e._u([{key:"col-status",fn:function(e){return[a("i",{class:1===e.row.status?"el-icon-check":"el-icon-close",style:{color:1===e.row.status?"#67c23a":"#f56c6c",fontSize:"20px"}})]}},{key:"bt-status",fn:function(t){return[!t.data.item.show||t.data.item.ifRender&&!t.data.item.ifRender(t.data.row)?e._e():a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:t.data.row.status-1>=0?"danger":"success",icon:t.data.item.icon,disabled:t.data.item.disabled,loading:t.data.row[t.data.item.loading]},on:{click:function(a){return e.handleClick(t.data.item.event,t.data.row)}}},[e._v("\n        "+e._s(t.data.row.status-1>=0?"停用":"启用")+"\n      ")])]}}])}),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},[a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,rules:e.formInfo.rules,"label-width":e.formInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.formInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.formInfo,"ref",t)}},scopedSlots:e._u([{key:"form-image",fn:function(){return[a("div",{staticClass:"slot-image"},[a("img",{directives:[{name:"imgAlart",rawName:"v-imgAlart"}],staticStyle:{height:"100px"},attrs:{src:e.formInfo.data.image}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-picture",size:"mini"},on:{click:function(t){return e.handleClick("selectFile")}}},[e._v("\n            "+e._s(e.formInfo.data.image?"更换图片":"选择图片")+"\n          ")])],1)]},proxy:!0}])})],1),e._v(" "),e.selectFileInfo.visible?a("select-file",{attrs:{type:e.selectFileInfo.type,visible:e.selectFileInfo.visible},on:{"update:visible":function(t){return e.$set(e.selectFileInfo,"visible",t)}},model:{value:e.formInfo.data.image,callback:function(t){e.$set(e.formInfo.data,"image",t)},expression:"formInfo.data.image"}}):e._e()],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("ac6a"),a("7f7f"),a("bd86")),s=a("5880"),r=a("176e");function o(e){return Object(r["a"])({url:"/apis/bbs/v1/techSquare/create",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/apis/bbs/v1/techSquare/update",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/apis/bbs/v1/techSquare/delete/".concat(e),method:"delete"})}function f(e){return Object(r["a"])({url:"/apis/bbs/v1/techSquare/getList",method:"get",params:e})}var u=a("e3ee"),p=a("5f8b"),b=a("e94a"),h=a("0d40"),m=a("5ccc"),v=a("7a02");function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I={components:{PageFilter:p["a"],PageTable:b["a"],PageDialog:h["a"],PageForm:m["a"],SelectFile:v["a"]},data:function(){return{getListApi:f,createApi:o,updateApi:c,deleteApi:d,listTypeInfo:{tagTypeList:[],statusList:[{key:"启用",value:1},{key:"停用",value:0}]},filterInfo:{query:{tag_type_id:"",status:""},list:[{type:"select",label:"技术类型",value:"tag_type_id",list:"tagTypeList"},{type:"input",label:"别名",value:"name"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0},{type:"button",label:"添加",btType:"primary",icon:"el-icon-plus",event:"create",show:!1}]},tableInfo:{refresh:1,initCurpage:1,data:[],fieldList:[{label:"技术类型",value:"tag_type_id",list:"tagTypeList"},{label:"别名",value:"name"},{label:"排序",value:"sort",width:80},{label:"状态",value:"status",width:90,type:"slot"},{label:"创建时间",value:"create_time",width:180},{label:"更新时间",value:"update_time",width:180}],handle:{fixed:"right",label:"操作",width:"280",btList:[{label:"启用",type:"success",icon:"el-icon-albb-process",event:"status",loading:"statusLoading",show:!1,slot:!0},{label:"编辑",type:"",icon:"el-icon-edit",event:"update",show:!1},{label:"删除",type:"danger",icon:"el-icon-delete",event:"delete",show:!1}]}},formInfo:{ref:null,data:{id:"",tag_type_id:"",name:"",sort:"",status:1},fieldList:[{label:"技术类型",value:"tag_type_id",type:"select",list:"tagTypeList",filterable:!0,required:!0},{label:"别名",value:"name",type:"input"},{label:"排序",value:"sort",type:"input",required:!0},{label:"状态",value:"status",type:"select",list:"statusList",required:!0}],rules:{},labelWidth:"120px"},dialogInfo:{title:{create:"添加",update:"编辑"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]},selectFileInfo:{type:2,visible:!1,value:""}}},computed:g({},Object(s["mapGetters"])(["userInfo","dataPerms"])),watch:{"dialogInfo.visible":function(e){var t=this.formInfo;e||(t.ref&&t.ref.resetFields(),this.resetForm(),this.dialogInfo.btLoading=!1)}},mounted:function(){this.initDataPerms(),this.initRules(),this.initList(),this.getList()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList,t=this.filterInfo.list;this.$initDataPerms("techSquare",e),this.$initDataPerms("techSquare",t)},initRules:function(){var e=this.formInfo;e.rules=this.$initRules(e.fieldList)},initList:function(){var e=this,t=this.listTypeInfo;Object(u["c"])().then((function(a){a.success?t.tagTypeList=a.content.map((function(e){return{key:e.name,value:e.id}})):e.$message({showClose:!0,message:a.message,type:a.success?"success":"error",duration:3500})}))},getList:function(){this.tableInfo.refresh=Math.random()},getPlaceholder:function(e){var t;return t="input"===e.type||"textarea"===e.type?"请输入"+e.label:"select"===e.type||"time"===e.type||"date"===e.type?"请选择"+e.label:e.label,t},handleClick:function(e,t){var a=this,i=this.tableInfo,n=this.dialogInfo,l=this.formInfo;switch(e){case"search":i.initCurpage=Math.random(),i.refresh=Math.random();break;case"create":n.type=e,n.visible=!0;break;case"update":for(var s in n.type=e,n.visible=!0,t)s in l.data&&(l.data[s]=t[s]);break;case"status":var r={};for(var f in t)f in l.data&&(r[f]=t[f]);r.status=r.status-1>=0?0:1,t.statusLoading=!0,this.$handleAPI("update",c,r).then((function(e){t.statusLoading=!1,e.success&&(t.status=r.status)})).catch((function(){t.statusLoading=!1}));break;case"delete":this.$handleAPI(e,d,t.id).then((function(e){e.success&&(i.refresh=Math.random())}));break;case"close":n.visible=!1;break;case"save":this.formInfo.ref.validate((function(e){if(e){var t,l=a.formInfo.data,s=a.dialogInfo.type;if("create"===s)t=o;else{if("update"!==s)return;t=c}n.btLoading=!0,a.$handleAPI(s,t,l).then((function(e){e.success&&(n.visible=!1,i.refresh=Math.random()),n.btLoading=!1})).catch((function(e){n.btLoading=!1}))}}));break;case"selectFile":this.selectFileInfo.visible=!0;break}},handleEvent:function(e,t){var a=this;switch(e){case"list":if(!t)return;t.forEach((function(e){a.$set(e,"statusLoading",!1),e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break}},resetForm:function(){this.formInfo.data={id:"",tag_type_id:"",name:"",sort:"",status:1}}}},k=I,w=(a("51ad"),a("2877")),L=Object(w["a"])(k,i,n,!1,null,null,null);t["default"]=L.exports},"8a70":function(e,t,a){},"8b47":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e._v("\n  页面图表配置\n")])},n=[],l={},s=l,r=a("2877"),o=Object(r["a"])(s,i,n,!1,null,"7c4d6874",null);t["default"]=o.exports},"8b5c":function(e,t,a){"use strict";var i=a("ee9b"),n=a.n(i);n.a},"8e19":function(e,t,a){},9224:function(e){e.exports=JSON.parse('{"name":"BBS","version":"1.1.0","description":"BBS管理系统","private":true,"scripts":{"dev":"vue-cli-service serve","localhost":"vue-cli-service serve --mode localhost","build":"vue-cli-service build","lint":"eslint --fix --ext .js,.vue src"},"dependencies":{"axios":"^0.19.0","babel-polyfill":"^6.26.0","driver.js":"~0.6.1","echarts":"~4.1.0","element-ui":"~2.4.3","js-cookie":"~2.2.0","marked":"~0.6.2","mavon-editor":"~2.6.17","mqtt":"^2.18.8","node-sass":"~4.9.1","normalize.css":"~8.0.0","nprogress":"~0.2.0","sass-loader":"~7.0.3","vue":"~2.6.10","vue-count-to":"~1.0.13","vue-i18n":"7.3.2","vue-router":"~3.0.1","vuex":"~3.0.1"},"devDependencies":{"@vue/cli-plugin-babel":"^3.6.0","@vue/cli-plugin-eslint":"^3.6.0","@vue/cli-service":"^3.6.0","babel-eslint":"^10.0.1","babel-loader":"8.0.4","@babel/core":"^7.1.2","@babel/preset-env":"7.1.0","@babel/polyfill":"7.0.0","eslint":"^5.16.0","eslint-plugin-vue":"^5.0.0","node-sass":"^4.9.0","sass-loader":"^7.1.0","image-webpack-loader":"^4.6.0","vue-template-compiler":"^2.5.21","script-ext-html-webpack-plugin":"2.1.3","compression-webpack-plugin":"^3.0.0"},"eslintConfig":{"root":true,"env":{"node":true},"extends":["plugin:vue/essential","eslint:recommended"],"rules":{},"parserOptions":{"parser":"babel-eslint"}},"postcss":{"plugins":{"autoprefixer":{}}},"browserslist":["> 1%","last 2 versions","not ie <= 8"]}')},"960f":function(e,t,a){},"97d8":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return o}));var i=a("176e");function n(e){return Object(i["a"])({url:"/apis/bbs/v1/tag/create",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/apis/bbs/v1/tag/update",method:"put",data:e})}function s(e){return Object(i["a"])({url:"/apis/bbs/v1/tag/delete/".concat(e),method:"delete"})}function r(e){return Object(i["a"])({url:"/apis/bbs/v1/tag/getList",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/apis/bbs/v1/tag/getAll",method:"get",params:e})}},"97db":function(e,t,a){"use strict";var i=a("c9d1"),n=a.n(i);n.a},"9ed6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"ground-glass"}),e._v(" "),a("el-form",{ref:"form",staticClass:"login-form",attrs:{model:e.formInfo.data,rules:e.formInfo.rules}},[a("div",{staticClass:"title"},[a("p",{staticClass:"name",style:"color: "+e.theme},[e._v("\n        "+e._s(e.$config.SYSTEMNAME)+"\n      ")])]),e._v(" "),a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{type:"text","prefix-icon":"el-icon-albb-people_fill",placeholder:"请输入账号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin()}},model:{value:e.formInfo.data.account,callback:function(t){e.$set(e.formInfo.data,"account","string"===typeof t?t.trim():t)},expression:"formInfo.data.account"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","prefix-icon":"el-icon-albb-lock_fill",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin()}},model:{value:e.formInfo.data.password,callback:function(t){e.$set(e.formInfo.data,"password","string"===typeof t?t.trim():t)},expression:"formInfo.data.password"}})],1),e._v(" "),a("div",{staticClass:"remember"},[a("el-checkbox",{staticStyle:{color:"rgb(100, 100, 100)"},model:{value:e.formInfo.remember,callback:function(t){e.$set(e.formInfo,"remember",t)},expression:"formInfo.remember"}},[e._v("\n        记住密码\n      ")]),e._v(" "),a("router-link",{staticClass:"forget",style:"color: "+e.theme,attrs:{tag:"a",target:"_blank",to:"/retrieve"}},[e._v("\n        忘记密码?\n      ")])],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"login-bt",attrs:{loading:e.buttonInfo.btLoading,type:"primary"},on:{click:function(t){return e.handleLogin()}}},[e._v("\n        登录\n      ")])],1)],1)],1)},n=[],l=(a("8e6e"),a("ac6a"),a("456d"),a("cadf"),a("bd86")),s=a("5880"),r=a("c24f"),o=a("9224");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={data:function(){return{formInfo:{remember:!1,data:{account:"test",password:"123456",type:2},fieldList:[{label:"账号",value:"account",required:!0},{label:"密码",value:"password",required:!0}],rules:{}},buttonInfo:{btLoading:!1}}},computed:d({},Object(s["mapGetters"])(["theme"])),watch:{"formInfo.remember":function(e){}},beforeCreate:function(){document.title=o.description},created:function(){this.initRemember(),this.initRules()},methods:{initRules:function(){var e=this.formInfo;e.rules=this.$initRules(e.fieldList)},initRemember:function(e){var t=this.formInfo,a=t.data;!0===e?(localStorage.setItem("remember",t.remember),localStorage.setItem("account",a.account),localStorage.setItem("password",a.password)):!1===e&&(localStorage.setItem("remember",t.remember),localStorage.setItem("account",""),localStorage.setItem("password","")),"true"===localStorage.getItem("remember")?(t.remember=!0,a.account=localStorage.getItem("account"),a.password=localStorage.getItem("password")):(localStorage.removeItem("remember"),localStorage.removeItem("account"),localStorage.removeItem("password"))},handleLogin:function(){var e=this;this.$refs.form.validate((function(t){e.buttonInfo.btLoading=!0,Object(r["c"])(e.formInfo.data).then((function(t){t.success?(e.initRemember(e.formInfo.remember),e.$store.dispatch("user/setToken",t.token),e.$store.dispatch("user/setUserInfo",t.content.data).then((function(){e.$router.push("/")}))):e.$message({showClose:!0,message:t.message,type:t.success?"success":"error",duration:3500}),e.buttonInfo.btLoading=!1})).catch((function(){e.buttonInfo.btLoading=!1}))}))}}},u=f,p=(a("f560"),a("2877")),b=Object(p["a"])(u,i,n,!1,null,"5fbf5246",null);t["default"]=b.exports},a388:function(e,t,a){},a420:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent},scopedSlots:e._u([{key:"col-status",fn:function(e){return[a("i",{class:1===e.row.status?"el-icon-check":"el-icon-close",style:{color:1===e.row.status?"#67c23a":"#f56c6c",fontSize:"20px"}})]}},{key:"bt-status",fn:function(t){return[!t.data.item.show||t.data.item.ifRender&&!t.data.item.ifRender(t.data.row)?e._e():a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:t.data.row.status-1>=0?"danger":"success",icon:t.data.item.icon,disabled:t.data.item.disabled,loading:t.data.row[t.data.item.loading]},on:{click:function(a){return e.handleClick(t.data.item.event,t.data.row)}}},[e._v("\n        "+e._s(t.data.row.status-1>=0?"停用":"启用")+"\n      ")])]}}])}),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},[a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,rules:e.formInfo.rules,"label-width":e.formInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.formInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.formInfo,"ref",t)}},scopedSlots:e._u([{key:"form-image",fn:function(){return[a("div",{staticClass:"slot-image"},[a("img",{directives:[{name:"imgAlart",rawName:"v-imgAlart"}],staticStyle:{height:"100px"},attrs:{src:e.formInfo.data.image}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-picture",size:"mini"},on:{click:function(t){return e.handleClick("selectFile")}}},[e._v("\n            "+e._s(e.formInfo.data.image?"更换图片":"选择图片")+"\n          ")])],1)]},proxy:!0}])})],1),e._v(" "),e.selectFileInfo.visible?a("select-file",{attrs:{type:e.selectFileInfo.type,visible:e.selectFileInfo.visible},on:{"update:visible":function(t){return e.$set(e.selectFileInfo,"visible",t)}},model:{value:e.formInfo.data.image,callback:function(t){e.$set(e.formInfo.data,"image",t)},expression:"formInfo.data.image"}}):e._e()],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("ac6a"),a("bd86")),s=a("5880"),r=a("176e");function o(e){return Object(r["a"])({url:"/apis/bbs/v1/carousel/create",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/apis/bbs/v1/carousel/update",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/apis/bbs/v1/carousel/delete/".concat(e),method:"delete"})}function f(e){return Object(r["a"])({url:"/apis/bbs/v1/carousel/getList",method:"get",params:e})}var u=a("5f8b"),p=a("e94a"),b=a("0d40"),h=a("5ccc"),m=a("7a02");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={components:{PageFilter:u["a"],PageTable:p["a"],PageDialog:b["a"],PageForm:h["a"],SelectFile:m["a"]},data:function(){return{getListApi:f,createApi:o,updateApi:c,deleteApi:d,listTypeInfo:{eventList:[{key:"无效果",value:0},{key:"跳转路由（self）",value:1},{key:"跳转路由（blank）",value:2},{key:"跳转外部页面",value:3}],statusList:[{key:"启用",value:1},{key:"停用",value:0}]},filterInfo:{query:{title:"",click:"",status:""},list:[{type:"input",label:"标题",value:"title"},{type:"select",label:"点击触发",value:"click",list:"eventList"},{type:"select",label:"状态",value:"status",list:"statusList"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0},{type:"button",label:"添加",btType:"primary",icon:"el-icon-plus",event:"create",show:!1}]},tableInfo:{refresh:1,initCurpage:1,data:[],fieldList:[{label:"标题",value:"title"},{label:"图片",value:"image",type:"image",width:100},{label:"排序",value:"sort",width:80},{label:"点击触发",value:"click",type:"select",list:"eventList",minWidth:120},{label:"跳转地址",value:"href",minWidth:120},{label:"状态",value:"status",width:90,type:"slot"},{label:"创建时间",value:"create_time",width:180},{label:"更新时间",value:"update_time",width:180}],handle:{fixed:"right",label:"操作",width:"280",btList:[{label:"启用",type:"success",icon:"el-icon-albb-process",event:"status",loading:"statusLoading",show:!1,slot:!0},{label:"编辑",type:"",icon:"el-icon-edit",event:"update",show:!1},{label:"删除",type:"danger",icon:"el-icon-delete",event:"delete",show:!1}]}},formInfo:{ref:null,data:{id:"",title:"",image:"",click:"",href:"",sort:"",desc:"",status:1},fieldList:[{label:"标题",value:"title",type:"input",required:!0},{label:"图片",value:"image",type:"slot",className:"el-form-block",required:!0},{label:"点击触发",value:"click",type:"select",list:"eventList"},{label:"跳转地址",value:"href",type:"input"},{label:"排序",value:"sort",type:"input"},{label:"描述",value:"desc",type:"textarea",className:"el-form-block"},{label:"状态",value:"status",type:"select",list:"statusList",required:!0}],rules:{},labelWidth:"120px"},dialogInfo:{title:{create:"添加",update:"编辑"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]},selectFileInfo:{type:2,visible:!1,value:""}}},computed:y({},Object(s["mapGetters"])(["userInfo","dataPerms"])),watch:{"dialogInfo.visible":function(e){var t=this.formInfo;e||(t.ref&&t.ref.resetFields(),this.resetForm(),this.dialogInfo.btLoading=!1)}},mounted:function(){this.initDataPerms(),this.initRules(),this.getList()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList,t=this.filterInfo.list;this.$initDataPerms("carousel",e),this.$initDataPerms("carousel",t)},initRules:function(){var e=this.formInfo;e.rules=this.$initRules(e.fieldList)},getList:function(){this.tableInfo.refresh=Math.random()},getPlaceholder:function(e){var t;return t="input"===e.type||"textarea"===e.type?"请输入"+e.label:"select"===e.type||"time"===e.type||"date"===e.type?"请选择"+e.label:e.label,t},handleClick:function(e,t){var a=this,i=this.tableInfo,n=this.dialogInfo,l=this.formInfo;switch(e){case"search":i.initCurpage=Math.random(),i.refresh=Math.random();break;case"create":n.type=e,n.visible=!0;break;case"update":for(var s in n.type=e,n.visible=!0,t)s in l.data&&(l.data[s]=t[s]);break;case"status":var r={};for(var f in t)f in l.data&&(r[f]=t[f]);r.status=r.status-1>=0?0:1,t.statusLoading=!0,this.$handleAPI("update",c,r).then((function(e){t.statusLoading=!1,e.success&&(t.status=r.status)})).catch((function(){t.statusLoading=!1}));break;case"delete":this.$handleAPI(e,d,t.id).then((function(e){e.success&&(i.refresh=Math.random())}));break;case"close":n.visible=!1;break;case"save":this.formInfo.ref.validate((function(e){if(e){var t,l=a.formInfo.data,s=a.dialogInfo.type;if("create"===s)t=o;else{if("update"!==s)return;t=c}n.btLoading=!0,a.$handleAPI(s,t,l).then((function(e){e.success&&(n.visible=!1,i.refresh=Math.random()),n.btLoading=!1})).catch((function(e){n.btLoading=!1}))}}));break;case"selectFile":this.selectFileInfo.visible=!0;break}},handleEvent:function(e,t){var a=this;switch(e){case"list":if(!t)return;t.forEach((function(e){a.$set(e,"statusLoading",!1),e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break}},resetForm:function(){this.formInfo.data={id:"",title:"",image:"",click:"",href:"",sort:"",desc:"",status:1}}}},I=g,k=(a("ae51"),a("2877")),w=Object(k["a"])(I,i,n,!1,null,null,null);t["default"]=w.exports},a8e4:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e._v("\n  业务管理\n")])},n=[],l={},s=l,r=a("2877"),o=Object(r["a"])(s,i,n,!1,null,"14472d9a",null);t["default"]=o.exports},ad94:function(e,t,a){},ae51:function(e,t,a){"use strict";var i=a("a388"),n=a.n(i);n.a},affb:function(e,t,a){},bb38:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent},scopedSlots:e._u([{key:"col-title",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看文章详细信息",placement:"left"}},[a("a",{style:"color: "+e.theme+"; padding: 0 20px;",on:{click:function(a){return e.handleClick("view",t.row)}}},[e._v(e._s(t.row.title))])])]}}])}),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":"view"===e.dialogInfo.type?void 0:e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},[a("p",{staticClass:"title"},[e._v(e._s(e.articleInfo.title))]),e._v(" "),a("div",{staticClass:"markdown",domProps:{innerHTML:e._s(e.marked(e.articleInfo.content))}})])],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("ac6a"),a("bd86")),s=a("5880"),r=a("176e");function o(e){return Object(r["a"])({url:"/api/article/create",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/api/article/update",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/api/article/delete/".concat(e),method:"delete"})}function f(e){return Object(r["a"])({url:"/api/article/getRow/".concat(e),method:"get"})}function u(e){return Object(r["a"])({url:"/api/article/getList",method:"get",params:e})}var p=a("32cc"),b=a("5f8b"),h=a("e94a"),m=a("0d40");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={components:{PageFilter:b["a"],PageTable:h["a"],PageDialog:m["a"]},data:function(){return{getListApi:u,createApi:o,updateApi:c,deleteApi:d,marked:p["a"],listTypeInfo:{flagList:[{key:"草稿",value:1},{key:"审核中",value:2},{key:"已发布",value:3},{key:"审核失败",value:4},{key:"封禁",value:5}],typeList:[{key:"原创",value:1},{key:"转载",value:2},{key:"翻译",value:3}],statusList:[{key:"启用",value:1},{key:"停用",value:0}]},filterInfo:{query:{title:"",type:"",flag:""},list:[{type:"input",label:"标题",value:"title"},{type:"select",label:"类型",value:"type",list:"typeList"},{type:"select",label:"状态",value:"flag",list:"flagList"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0}]},tableInfo:{refresh:1,initCurpage:1,data:[],fieldList:[{label:"文章标题",value:"title",type:"slot",minWidth:180},{label:"类型",value:"type",type:"select",list:"typeList",width:100},{label:"状态",value:"flag",width:90,type:"select",list:"flagList"},{label:"创建人",value:"create_user_name"},{label:"创建时间",value:"create_time",width:180}],handle:{fixed:"right",label:"操作",width:"100",btList:[{label:"删除",type:"danger",icon:"el-icon-delete",event:"delete",show:!1,ifRender:function(e){return 1===e.flag}}]}},articleInfo:{},dialogInfo:{width:"80%",title:{create:"添加",update:"编辑",view:"文章信息"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]},selectFileInfo:{type:2,visible:!1,value:""}}},computed:y({},Object(s["mapGetters"])(["theme","userInfo","dataPerms"])),watch:{},mounted:function(){this.initList(),this.initDataPerms(),this.getList()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList,t=this.filterInfo.list;this.$initDataPerms("articleMan",e),this.$initDataPerms("articleMan",t)},initList:function(){},getList:function(){this.tableInfo.refresh=Math.random()},handleClick:function(e,t){var a=this,i=this.tableInfo,n=this.dialogInfo;switch(e){case"search":i.initCurpage=Math.random(),i.refresh=Math.random();break;case"create":n.type=e,n.visible=!0;break;case"view":case"update":n.type=e,n.visible=!0,this.articleInfo=JSON.parse(JSON.stringify(t)),f(t.id).then((function(e){e.success&&(a.articleInfo=e.content[0])}));break;case"delete":this.$handleAPI(e,d,t.id).then((function(e){e.success&&(i.refresh=Math.random())}));break;case"close":n.visible=!1;break}},handleEvent:function(e,t){var a=this;switch(e){case"list":if(!t)return;t.forEach((function(e){a.$set(e,"statusLoading",!1),e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break}}}},I=g,k=(a("60c2"),a("2877")),w=Object(k["a"])(I,i,n,!1,null,"c8f60122",null);t["default"]=w.exports},c402:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent},scopedSlots:e._u([{key:"col-title",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看文章详细信息",placement:"left"}},[a("a",{style:"color: "+e.theme+"; padding: 0 20px;",on:{click:function(a){return e.handleClick("view",t.row)}}},[e._v(e._s(t.row.title))])])]}}])}),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":"view"===e.dialogInfo.type?void 0:e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}})],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("ac6a"),a("bd86")),s=a("5880"),r=a("176e");function o(e){return Object(r["a"])({url:"/api/column/create",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/api/column/update",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/api/column/delete/".concat(e),method:"delete"})}function f(e){return Object(r["a"])({url:"/api/column/getRow/".concat(e),method:"get"})}function u(e){return Object(r["a"])({url:"/api/column/getList",method:"get",params:e})}var p=a("5f8b"),b=a("e94a"),h=a("0d40");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={components:{PageFilter:p["a"],PageTable:b["a"],PageDialog:h["a"]},data:function(){return{getListApi:u,createApi:o,updateApi:c,deleteApi:d,listTypeInfo:{flagList:[{key:"草稿",value:1},{key:"审核中",value:2},{key:"已发布",value:3},{key:"审核失败",value:4},{key:"封禁",value:5}],typeList:[{key:"原创",value:1},{key:"转载",value:2},{key:"翻译",value:3}],statusList:[{key:"启用",value:1},{key:"停用",value:0}]},filterInfo:{query:{title:"",type:"",flag:""},list:[{type:"input",label:"专栏名称",value:"name"},{type:"select",label:"状态",value:"flag",list:"flagList"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0}]},tableInfo:{refresh:1,initCurpage:1,data:[],fieldList:[{label:"专栏名称",value:"name",minWidth:180},{label:"专栏地址",value:"url",minWidth:180},{label:"状态",value:"flag",width:90,type:"select",list:"flagList"},{label:"创建人",value:"create_user_name"},{label:"创建时间",value:"create_time",width:180}],handle:{fixed:"right",label:"操作",width:"100",btList:[{label:"删除",type:"danger",icon:"el-icon-delete",event:"delete",show:!1,ifRender:function(e){return 1===e.flag}}]}},articleInfo:{},dialogInfo:{width:"80%",title:{create:"添加",update:"编辑"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]}}},computed:v({},Object(s["mapGetters"])(["theme","userInfo","dataPerms"])),watch:{},mounted:function(){this.initList(),this.initDataPerms(),this.getList()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList,t=this.filterInfo.list;this.$initDataPerms("columnMan",e),this.$initDataPerms("columnMan",t)},initList:function(){},getList:function(){this.tableInfo.refresh=Math.random()},handleClick:function(e,t){var a=this,i=this.tableInfo,n=this.dialogInfo;switch(e){case"search":i.initCurpage=Math.random(),i.refresh=Math.random();break;case"create":n.type=e,n.visible=!0;break;case"view":case"update":n.type=e,n.visible=!0,this.articleInfo=JSON.parse(JSON.stringify(t)),f(t.id).then((function(e){e.success&&(a.articleInfo=e.content[0])}));break;case"delete":this.$handleAPI(e,d,t.id).then((function(e){e.success&&(i.refresh=Math.random())}));break;case"close":n.visible=!1;break}},handleEvent:function(e,t){var a=this;switch(e){case"list":if(!t)return;t.forEach((function(e){a.$set(e,"statusLoading",!1),e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break}}}},g=y,I=(a("777d"),a("2877")),k=Object(I["a"])(g,i,n,!1,null,"168dc66b",null);t["default"]=k.exports},c492:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  1\n")])},n=[],l={},s=l,r=a("2877"),o=Object(r["a"])(s,i,n,!1,null,"8a3deb0e",null);t["default"]=o.exports},c6c3:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"HOWTOUSE markdown",domProps:{innerHTML:e._s(e.marked(e.init()))}})},n=[],l=a("32cc"),s={data:function(){return{marked:l["a"]}},mounted:function(){var e=this;document.querySelector(".HOWTOUSE").addEventListener("click",(function(t){t.preventDefault(),"A"===t.target.nodeName&&e.$fn.openWindow(t.target.href)}))},methods:{init:function(){return"\n# 关于 #\n## shift + F11 开启全屏模式 ##\n## github地址 ##\n\n - [管理平台][1] （建设中）\n - [论坛][2] （建设中）\n - [node服务][3] （建设中）\n\n# 文件库 #\n## 图片管理 ##\n用户可设置相关文件夹，将相关图片按文件分类上传到服务器，用于管理系统其他模块图片配置\n## 文件管理 ##\n用户可设置相关文件夹，将相关文件按文件分类上传到服务器，用于管理系统其他模块文件配置\n# 论坛设置 #\n[去论坛看看][4] （建设中）\n## 轮播管理 ##\n论坛端主页的轮播管理\n## 标签类型管理 ##\n用于论坛端\n## 标签管理 ##\n用于论坛端\n# 系统管理 #\n## 用户管理页面 ##\n### 查询 ###\n\n - 可以查询到当前用户所创建的用户\n - 可以查询到创建的用户创建的用户\n - 无限分级\n### 创建用户 ###\n创新新用户\n### 编辑用户 ###\n对用户进行编辑操作\n### 删除用户 ###\n \n - 当前用户存在创建用户，删除时需要先将创建的用户转移给其他用户（非自己的子集用户）\n - 当前用户不存在创建用户，可直接删除\n## 角色管理页面 ##\n### 创建角色 ###\n角色创建在当前选中角色的下级\n### 编辑角色 ###\n对角色基本信息进行编辑操作\n### 删除角色 ###\n删除当前角色\n### 绑定用户 ###\n将用户绑定在当前角色，用户将拥有当前角色的权限\n## 分配权限 ##\n - 左边树状分配菜单权限，右边表格分配数据权限\n - 给角色分配权限的时候，只能在当前所属上级的角色所拥有的权限中进行分配\n - 测试角色只包含一些不影响页面功能的数据权限\n\n## 菜单管理 ##\n管理员可操作，用于配置菜单和数据权限\n## 系统日志 ##\n记录用户登陆和基本操作信息\n\n\n  [1]: https://github.com/2017coding/BBS_admin\n  [2]: https://github.com/2017coding/BBS\n  [3]: https://github.com/2017coding/BBS_node\n  [4]: https://lyh.red/bbs/\n      "}}},r=s,o=(a("2e51"),a("2877")),c=Object(o["a"])(r,i,n,!1,null,null,null);t["default"]=c.exports},c7f0:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{ref:"upload",attrs:{action:e.url,headers:e.headersData,multiple:!0,"auto-upload":e.autoUpload,data:e.uploadData,"before-upload":e.uploadBefore,"on-remove":e.uploadRemove,"on-progress":e.uploadProgress,"on-success":e.uploadSuccess,"on-error":e.uploadError,"file-list":e.fileList,"list-type":e.listType}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("\n    "+e._s(e.autoUpload?"点击上传":"读取文件")+"\n  ")]),e._v(" "),e.autoUpload?e._e():a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("\n    开始上传\n  ")]),e._v(" "),a("div",{staticStyle:{"margin-top":"-5px",padding:"10px 0",color:"#ff4949"},attrs:{slot:"tip"},slot:"tip"},[e._v("\n    "+e._s(e.uploadMessage)+" "),"正在上传"==e.uploadMessage?a("i",{staticClass:"el-icon-loading"}):e._e()])],1)},n=[],l=(a("ac6a"),a("7f7f"),a("28a5"),a("c5f6"),a("9feb")),s={props:{url:{type:String,default:"https://www.lyh.red/api/file/upload"},fileData:{type:Array},autoUpload:{type:Boolean,default:!1},uploadData:{type:Object},uploadType:{type:String,default:"image"},uploadNums:{type:Number,default:-1},listType:{type:String,default:"picture"}},data:function(){return{checkType:!0,headersData:{},fileList:[],uploadMessage:""}},watch:{uploadType:function(){this.init()},fileList:function(){this.$emit("cdHandleUpload",{fileList:this.fileList})},uploadMessage:function(){this.$emit("cdHandleUpload",{uploadMessage:this.uploadMessage})}},created:function(){this.init()},methods:{init:function(){this.headersData={Authorization:Object(l["b"])("token")},"picture"===this.listType&&("image"===this.uploadType?this.$emit("update:listType","picture"):this.$emit("update:listType","text")),this.fileData&&(this.fileList=JSON.parse(JSON.stringify(this.fileData)))},checkFileType:function(e){var t=!0;switch(this.uploadType){case"image":"jpg"!==e&&"gif"!==e&&"png"!==e&&"bmp"!==e&&"raw"!==e&&"jpeg"!==e&&(this.uploadMessage="请选择图片文件",t=!1);break;case"json":"json"!==e&&(this.uploadMessage="请选择json文件",t=!1);break;case"file":break;default:this.uploadMessage="请选择正确的文件格式",t=!1;break}return this.checkType=t,t},submitUpload:function(){this.$refs.upload.submit()},uploadBefore:function(e){var t=e.name.split("."),a=t.length-1;this.checkFileType(t[a].toLowerCase())?this.uploadMessage="正在上传":this.$refs.upload.abort(e)},uploadProgress:function(e,t,a){this.checkType||(this.$refs.upload.abort(t),a.forEach((function(e,i){JSON.stringify(e)===JSON.stringify(t)&&a.splice(i,1)})))},uploadSuccess:function(e,t,a){if(e.success){if(this.uploadMessage="",-1===this.uploadNums||a.length<this.uploadNums)this.fileList=a;else if(a.length>this.uploadNums){for(var i=[],n=0,l=this.uploadNums;n<l;n++)i.push(a[a.length-(n+1)]);this.fileList=i}}else a.forEach((function(e,i){JSON.stringify(e)===JSON.stringify(t)&&a.splice(i,1)})),this.uploadMessage="上传失败";this.$message({showClose:!0,message:e.success?"上传成功":"上传失败",type:e.success?"success":"error",duration:3500}),this.$emit("handleEvent","upload",e.success)},uploadError:function(e,t,a){e||(a.forEach((function(e,i){JSON.stringify(e)===JSON.stringify(t)&&a.splice(i,1)})),this.uploadMessage="上传失败",this.$message({showClose:!0,message:"上传失败",type:"error",duration:3500}))},uploadRemove:function(e,t){}}},r=s,o=a("2877"),c=Object(o["a"])(r,i,n,!1,null,"02066139",null);t["a"]=c.exports},c9d1:function(e,t,a){},cd01:function(e,t,a){"use strict";var i=a("fa83d"),n=a.n(i);n.a},cfcc:function(e,t,a){},d4a5:function(e,t,a){"use strict";var i=a("affb"),n=a.n(i);n.a},d6cb:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"left"},[a("page-tree",{attrs:{"expand-all":!0,"load-type":1,"default-clicked":e.treeInfo.defaultClicked,"default-high-light":e.treeInfo.defaultHighLight,"default-expanded":e.treeInfo.defaultExpanded,"tree-data":e.treeInfo.treeData,"base-data":e.treeInfo.baseData,"node-key":e.treeInfo.nodeKey,"load-info":e.treeInfo.loadInfo,"right-menu-list":e.treeInfo.rightMenuList,"tree-refresh":e.treeInfo.refresh,"refresh-level":e.treeInfo.refreshLevel},on:{"update:baseData":function(t){return e.$set(e.treeInfo,"baseData",t)},"update:base-data":function(t){return e.$set(e.treeInfo,"baseData",t)},"update:loadInfo":function(t){return e.$set(e.treeInfo,"loadInfo",t)},"update:load-info":function(t){return e.$set(e.treeInfo,"loadInfo",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}})],1),e._v(" "),a("div",{staticClass:"right"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}})],1),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":"uploadFile"===e.dialogInfo.type?void 0:e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},["create"===e.dialogInfo.type||"update"===e.dialogInfo.type?a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,rules:e.formInfo.rules,"label-width":e.formInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.formInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.formInfo,"ref",t)}}}):"updateFile"===e.dialogInfo.type?a("page-form",{attrs:{"ref-obj":e.fileFormInfo.ref,data:e.fileFormInfo.data,"field-list":e.fileFormInfo.fieldList,rules:e.fileFormInfo.rules,"label-width":e.fileFormInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.fileFormInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.fileFormInfo,"ref",t)}}}):"uploadFile"===e.dialogInfo.type&&e.dialogInfo.visible?a("Upload",{attrs:{"upload-data":{fid:e.treeInfo.rightClickData.id,type:e.treeInfo.rightClickData.type},"upload-type":"file"},on:{handleEvent:e.handleEvent}}):e._e()],1)],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("6762"),a("2fdb"),a("ac6a"),a("7f7f"),a("bd86")),s=a("5880"),r=a("3657"),o=a("43f9"),c=a("6169"),d=a("5f8b"),f=a("e94a"),u=a("0d40"),p=a("5ccc"),b=a("c7f0");function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={components:{PageTree:c["a"],PageFilter:d["a"],PageTable:f["a"],PageDialog:u["a"],PageForm:p["a"],Upload:b["a"]},data:function(){return{createApi:r["a"],updateApi:r["d"],deleteApi:r["b"],getAllApi:r["c"],getListApi:o["c"],listTypeInfo:{iconList:[],statusList:[{key:"启用",value:1},{key:"停用",value:0}],treeList:[]},treeInfo:{initTree:!1,refresh:1,nodeKey:"key",defaultClicked:{},defaultHighLight:"",defaultExpanded:[],defaultClickedAsyc:"",defaultHighLightAsyc:"",defaultExpandedAsyc:[],treeData:[],baseData:[],loadInfo:{key:"id",pKey:"pid",label:"name",api:r["c"],params:{data:[{key:"type",value:1}],type:"query"},resFieldList:["content"]},leftClickData:{},rightClickData:{},rightMenuList:[]},filterInfo:{query:{name:"",suffix:"",f_id:"",type:1},list:[{type:"input",label:"文件名称",value:"name"},{type:"input",label:"文件类型",value:"suffix"},{type:"select",label:"所在目录",value:"f_id",list:"treeList"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0}]},tableInfo:{refresh:1,initTable:!1,initCurpage:1,pager:!1,data:[],fieldList:[{label:"所属目录",value:"f_id",list:"treeList"},{label:"文件名称",value:"name"},{label:"文件类型",value:"suffix",type:"tag"},{label:"文件大小",value:"size"},{label:"创建时间",value:"create_time",width:180},{label:"更新时间",value:"update_time",width:180}],handle:{fixed:"right",label:"操作",width:"300",btList:[{label:"复制地址",type:"primary",icon:"el-icon-ship",event:"copyFile",show:!0},{label:"编辑",type:"",icon:"el-icon-edit",event:"updateFile",show:!1},{label:"删除",type:"danger",icon:"el-icon-delete",event:"deleteFile",show:!1}]}},formInfo:{ref:null,data:{id:"",pid:"",name:"",type:1,sort:"",desc:""},fieldList:[{label:"所属目录",value:"pid",type:"tag",list:"treeList",required:!0},{label:"目录名称",value:"name",type:"input",required:!0},{label:"排序",value:"sort",type:"input",required:!0},{label:"描述",value:"desc",type:"textarea",className:"el-form-block"}],rules:{},labelWidth:"120px"},fileFormInfo:{ref:null,data:{id:"",f_id:"",name:"",type:1,desc:""},fieldList:[{label:"所属目录",value:"f_id",type:"tag",list:"treeList",required:!0},{label:"文件名称",value:"name",type:"input",required:!0}],rules:{},labelWidth:"120px"},dialogInfo:{title:{create:"添加目录",update:"编辑目录",uploadFile:"上传文件",updateFile:"编辑文件"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]}}},computed:m({},Object(s["mapGetters"])(["userInfo","dataPerms"])),watch:{"dialogInfo.visible":function(e){var t=this.formInfo,a=this.fileFormInfo;e||(t.ref&&t.ref.resetFields(),a.ref&&a.ref.resetFields(),this.resetForm(),this.dialogInfo.btLoading=!1)},"treeInfo.baseData":function(e){this.treeInfo.treeData=this.$fn.getTreeArr({key:"id",pKey:"pid",data:e}),this.initTree(e)}},mounted:function(){this.getList(),this.initDataPerms(),this.initRules()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList;this.$initDataPerms("fileMan",e)},initRules:function(){var e=this.formInfo,t=this.fileFormInfo;e.rules=this.$initRules(e.fieldList),t.rules=this.$initRules(t.fieldList)},initTree:function(e){var t=this.treeInfo;t.initTree||((t.defaultClickedAsyc||0===t.defaultClickedAsyc)&&(t.defaultClicked={id:t.defaultClickedAsyc}),(t.defaultHighLightAsyc||0===t.defaultHighLightAsyc)&&(t.defaultHighLight=t.defaultHighLightAsyc),t.defaultExpandedAsyc.length>0&&(t.defaultExpanded=t.defaultExpandedAsyc)),this.listTypeInfo.treeList=e.map((function(e){return e.key=e.name,e.value=e.id,e}))},getList:function(){this.tableInfo.refresh=Math.random()},handleClick:function(e,t){var a=this,i=this.treeInfo,n=this.tableInfo,l=this.dialogInfo,s=this.formInfo,c=this.fileFormInfo,d=this.filterInfo;switch(e){case"search":n.initCurpage=Math.random(),n.refresh=Math.random(),i.defaultClicked={id:d.query.f_id},i.defaultHighLight=d.query.f_id||null;break;case"updateFile":for(var f in l.type=e,l.visible=!0,t)f in c.data&&(c.data[f]=t[f]);break;case"deleteFile":this.$handleAPI("delete",o["a"],t.id).then((function(e){e.success&&(n.refresh=Math.random())}));break;case"close":l.visible=!1;break;case"save":var u,p,b,h=l.type;if("create"===h||"update"===h)p=s.data,b=s.ref;else{if("uploadFile"!==h&&"updateFile"!==h)return;p=c.data,b=c.ref}b.validate((function(e){if(e){if("create"===h)u=r["a"];else if("update"===h)u=r["d"];else if("uploadFile"===h);else{if("updateFile"!==h)return;u=o["d"]}l.btLoading=!0,a.$handleAPI(a.getApiType(h),u,p).then((function(e){e.success&&(l.visible=!1,"create"===h?(i.defaultClickedAsyc=p.pid,i.defaultHighLightAsyc=p.pid,i.defaultExpandedAsyc=[p.pid],i.refresh=Math.random()):"update"===h?(i.defaultClickedAsyc=p.id,i.defaultHighLightAsyc=p.id,i.defaultExpandedAsyc=[p.pid],i.refresh=Math.random()):"uploadFile"!==h&&"updateFile"!==h||(n.refresh=Math.random())),l.btLoading=!1})).catch((function(e){l.btLoading=!1}))}}));break;case"copyFile":this.$fn.copyData(t.completePath);break}},getApiType:function(e){return"create"===e||"update"===e?e:"uploadFile"===e?"create":"updateFile"===e?"update":void 0},handleEvent:function(e,t){var a=this,i=this.treeInfo,n=this.tableInfo,l=this.filterInfo;switch(e){case"list":if(!t)return;t.forEach((function(e){e.size=a.$fn.bytesToSize(e.size),e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break;case"leftClick":var s=JSON.parse(JSON.stringify(t.data));i.leftClickData=s,n.initCurpage=Math.random(),n.refresh=Math.random(),l.query.f_id=s.id;break;case"rightClick":var r=[];r=1===t.node.level?[{name:"添加下级目录",type:"create",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("fileMan:create")},{name:"刷新",type:"refreshTree",data:null,node:null,vm:null,show:!0}]:[{name:"上传文件",type:"uploadFile",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("fileMan:upload")},{name:"编辑",type:"update",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("fileMan:update")},{name:"删除",type:"delete",data:t.data,node:t.node,vm:t.vm,show:this.dataPerms.includes("fileMan:delete")},{name:"刷新",type:"refreshTree",data:null,node:null,vm:null,show:!0}],this.treeInfo.rightMenuList=r,i.rightClickData=JSON.parse(JSON.stringify(t.data));break;case"rightEvent":this.handleRightEvent(t.type,t);break;case"upload":t&&(l.query.f_id=i.rightClickData.id,i.defaultClicked={id:l.query.f_id},i.defaultHighLight=l.query.f_id,n.refresh=Math.random(),this.handleClick("close"));break}},handleRightEvent:function(e,t){var a=t.data,i=this.dialogInfo,n=this.formInfo,l=this.treeInfo,s=this.fileFormInfo;switch(e){case"refreshTree":case"refresh":l.initTree=!1,l.refreshLevel=t.node?t.node.level:0,l.refresh=Math.random();break;case"uploadFile":i.type=e,i.visible=!0,s.data.f_id=a.id;break;case"create":i.type=e,i.visible=!0,n.data.pid=a.id;break;case"update":for(var o in i.type=e,i.visible=!0,a)o in n.data&&(n.data[o]=a[o]);break;case"delete":this.$handleAPI(e,r["b"],a.id).then((function(e){e.success&&(l.defaultClickedAsyc=a.pid,l.defaultHighLightAsyc=a.pid,l.defaultExpandedAsyc=[a.pid],l.refresh=Math.random())}));break}},resetForm:function(){this.formInfo.data={id:"",pid:"",name:"",type:1,sort:"",desc:""},this.fileFormInfo.data={id:"",f_id:"",name:"",type:1,desc:""}}}},y=v,g=a("2877"),I=Object(g["a"])(y,i,n,!1,null,"e8340aa0",null);t["default"]=I.exports},db26:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent},scopedSlots:e._u([{key:"col-client",fn:function(t){return e._l(t.row.client.split(","),(function(t,i){return a("el-tag",{key:i,staticStyle:{"margin-left":"5px"}},[e._v("\n        "+e._s(e.$fn.getDataName({dataList:e.listTypeInfo.typeList,value:"value",label:"key",data:t}))+"\n      ")])}))}},{key:"col-status",fn:function(e){return[a("i",{class:1===e.row.status?"el-icon-check":"el-icon-close",style:{color:1===e.row.status?"#67c23a":"#f56c6c",fontSize:"20px"}})]}},{key:"bt-status",fn:function(t){return[!t.data.item.show||t.data.item.ifRender&&!t.data.item.ifRender(t.data.row)?e._e():a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:t.data.row.status-1>=0?"danger":"success",icon:t.data.item.icon,disabled:t.data.item.disabled,loading:t.data.row[t.data.item.loading]},on:{click:function(a){return e.handleClick(t.data.item.event,t.data.row)}}},[e._v("\n        "+e._s(t.data.row.status-1>=0?"停用":"启用")+"\n      ")])]}}])}),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},[a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,rules:e.formInfo.rules,"label-width":e.formInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.formInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.formInfo,"ref",t)}},scopedSlots:e._u([{key:"form-client",fn:function(){return[a("el-checkbox-group",{model:{value:e.formInfo.data.client,callback:function(t){e.$set(e.formInfo.data,"client",t)},expression:"formInfo.data.client"}},e._l(e.listTypeInfo.typeList,(function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v("\n            "+e._s(t.key)+"\n          ")])})),1)]},proxy:!0}])})],1)],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("ac6a"),a("55dd"),a("28a5"),a("bd86")),s=a("5880"),r=a("176e");function o(e){return Object(r["a"])({url:"/api/topic/create",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/api/topic/update",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/api/topic/delete/".concat(e),method:"delete"})}function f(e){return Object(r["a"])({url:"/api/topic/getList",method:"get",params:e})}var u=a("5f8b"),p=a("e94a"),b=a("0d40"),h=a("5ccc");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={components:{PageFilter:u["a"],PageTable:p["a"],PageDialog:b["a"],PageForm:h["a"]},data:function(){return{getListApi:f,createApi:o,updateApi:c,deleteApi:d,listTypeInfo:{typeList:[{key:"管理平台",value:"1"},{key:"论坛",value:"2"},{key:"移动端",value:"3"}],statusList:[{key:"启用",value:1},{key:"停用",value:0}]},filterInfo:{query:{title:"",click:"",status:""},list:[{type:"input",label:"主题名称",value:"name"},{type:"input",label:"主题编码",value:"code"},{type:"select",label:"订阅的客户端",value:"client",list:"typeList"},{type:"select",label:"状态",value:"status",list:"statusList"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0},{type:"button",label:"添加",btType:"primary",icon:"el-icon-plus",event:"create",show:!1}]},tableInfo:{refresh:1,initCurpage:1,data:[],fieldList:[{label:"主题名称",value:"name",minWidth:160},{label:"主题编码",value:"code",minWidth:200},{label:"订阅的客户端",value:"client",minWidth:230,type:"slot"},{label:"状态",value:"status",width:90,type:"slot"},{label:"创建时间",value:"create_time",width:180},{label:"更新时间",value:"update_time",width:180}],handle:{fixed:"right",label:"操作",width:"280",btList:[{label:"启用",type:"success",icon:"el-icon-albb-process",event:"status",loading:"statusLoading",show:!1,slot:!0},{label:"编辑",type:"",icon:"el-icon-edit",event:"update",show:!1},{label:"删除",type:"danger",icon:"el-icon-delete",event:"delete",show:!1}]}},formInfo:{ref:null,data:{id:"",name:"",code:"",client:[],desc:"",status:1},fieldList:[{label:"主题名称",value:"name",type:"input",required:!0},{label:"主题编码",value:"code",type:"input",required:!0},{label:"订阅的客户端",value:"client",type:"slot",className:"el-form-block",required:!0},{label:"描述",value:"desc",type:"textarea",className:"el-form-block"},{label:"状态",value:"status",type:"select",list:"statusList",required:!0}],rules:{},labelWidth:"120px"},dialogInfo:{title:{create:"添加",update:"编辑"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]}}},computed:v({},Object(s["mapGetters"])(["userInfo","dataPerms"])),watch:{"dialogInfo.visible":function(e){var t=this.formInfo;e||(t.ref&&t.ref.resetFields(),this.resetForm(),this.dialogInfo.btLoading=!1)}},mounted:function(){this.initDataPerms(),this.initRules(),this.getList()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList,t=this.filterInfo.list;this.$initDataPerms("topicMan",e),this.$initDataPerms("topicMan",t)},initRules:function(){var e=this.formInfo;e.rules=this.$initRules(e.fieldList)},getList:function(){this.tableInfo.refresh=Math.random()},getPlaceholder:function(e){var t;return t="input"===e.type||"textarea"===e.type?"请输入"+e.label:"select"===e.type||"time"===e.type||"date"===e.type?"请选择"+e.label:e.label,t},handleClick:function(e,t){var a=this,i=this.tableInfo,n=this.dialogInfo,l=this.formInfo;switch(e){case"search":i.initCurpage=Math.random(),i.refresh=Math.random();break;case"create":n.type=e,n.visible=!0;break;case"update":for(var s in n.type=e,n.visible=!0,t)s in l.data&&(l.data[s]=t[s]);l.data.client=l.data.client.split(",");break;case"status":var r={};for(var f in t)f in l.data&&(r[f]=t[f]);r.status=r.status-1>=0?0:1,t.statusLoading=!0,this.$handleAPI("update",c,r).then((function(e){t.statusLoading=!1,e.success&&(t.status=r.status)})).catch((function(){t.statusLoading=!1}));break;case"delete":this.$handleAPI(e,d,t.id).then((function(e){e.success&&(i.refresh=Math.random())}));break;case"close":n.visible=!1;break;case"save":this.formInfo.ref.validate((function(e){if(e){var t,l=a.formInfo.data,s=a.dialogInfo.type;if("create"===s)t=o;else{if("update"!==s)return;t=c}l.client=l.client.sort((function(e,t){return e-t})).join(","),n.btLoading=!0,a.$handleAPI(s,t,l).then((function(e){e.success&&(n.visible=!1,i.refresh=Math.random()),n.btLoading=!1})).catch((function(e){n.btLoading=!1}))}}));break}},handleEvent:function(e,t){var a=this;switch(e){case"list":if(!t)return;t.forEach((function(e){a.$set(e,"statusLoading",!1),e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break}},resetForm:function(){this.formInfo.data={id:"",name:"",code:"",client:[],desc:"",status:1}}}},g=y,I=(a("d4a5"),a("2877")),k=Object(I["a"])(g,i,n,!1,null,null,null);t["default"]=k.exports},dceb:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e._v("\n  已办事项\n")])},n=[],l={},s=l,r=a("2877"),o=Object(r["a"])(s,i,n,!1,null,"31a283d5",null);t["default"]=o.exports},e0b0:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"mac"},[a("div",{staticClass:"mac-header"},[e._m(0),e._v(" "),!e.edit&&e.dataPerms.includes("notices:set")?a("div",{staticClass:"mac-right",on:{click:function(t){return e.handleClick("update")}}},[a("i",{staticClass:"el-icon-edit"}),e._v("编辑\n      ")]):e._e()]),e._v(" "),a("div",{staticClass:"mac-body"},[e.edit?[a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,rules:e.formInfo.rules,"label-width":e.formInfo.labelWidth},on:{"update:refObj":function(t){return e.$set(e.formInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.formInfo,"ref",t)}}}),e._v(" "),a("div",{staticClass:"bt"},[a("el-button",{on:{click:function(t){return e.handleClick("canel")}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleClick("save")}}},[e._v("保存")])],1)]:a("p",{staticClass:"notices"},[e._v(e._s(e.formInfo.data.content||"暂无通知"))])],2)])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mac-left"},[a("i",{staticClass:"dot1"}),e._v(" "),a("i",{staticClass:"dot2"}),e._v(" "),a("i",{staticClass:"dot3"})])}],l=(a("8e6e"),a("ac6a"),a("456d"),a("cadf"),a("bd86")),s=a("5880"),r=a("176e");function o(e){return Object(r["a"])({url:"/apis/bbs/v1/notices/set",method:"post",data:e})}function c(){return Object(r["a"])({url:"/apis/bbs/v1/notices/get",method:"get"})}var d=a("5ccc");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={components:{PageForm:d["a"]},data:function(){return{edit:!1,btLoading:!1,formInfo:{ref:null,data:{href:"",content:"",status:1},fieldList:[{label:"跳转地址",value:"href",type:"input",className:"el-form-block",validator:""},{label:"内容",value:"content",type:"textarea",className:"el-form-block"}],rules:{}}}},computed:u({},Object(s["mapGetters"])(["dataPerms"])),mounted:function(){this.getData()},methods:{getData:function(){var e=this;c().then((function(t){t.success&&(e.formInfo.data=t.content[0])}))},handleClick:function(e){var t=this;switch(e){case"update":case"canel":this.edit=!this.edit;break;case"save":this.formInfo.ref.validate((function(e){if(e){t.btLoading=!0;var a=t.formInfo.data;t.$handleAPI("create",o,a).then((function(e){e.success&&(t.edit=!1),t.btLoading=!1})).catch((function(e){t.btLoading=!1}))}}));break}},resetForm:function(){this.formInfo.data={href:"",content:""}}}},b=p,h=(a("721f"),a("72a1"),a("2877")),m=Object(h["a"])(b,i,n,!1,null,"29d3d030",null);t["default"]=m.exports},e3ee:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"g",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"f",(function(){return c})),a.d(t,"d",(function(){return d}));var i=a("176e");function n(e){return Object(i["a"])({url:"/apis/bbs/v1/tagType/create",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/apis/bbs/v1/tagType/update",method:"put",data:e})}function s(e){return Object(i["a"])({url:"/apis/bbs/v1/tagType/delete/".concat(e),method:"delete"})}function r(e){return Object(i["a"])({url:"/apis/bbs/v1/tagType/getList",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/apis/bbs/v1/tagType/getAll",method:"get",params:e})}function c(e){return Object(i["a"])({url:"/apis/bbs/v1/tagRelation/setBindTag",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/apis/bbs/v1/tagRelation/getBindTag",method:"get",params:e})}},e5f4:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}})],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("ac6a"),a("bd86")),s=a("5880"),r=a("176e");function o(e){return Object(r["a"])({url:"/api/log/getList",method:"get",params:e})}var c=a("5f8b"),d=a("e94a");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={components:{PageFilter:c["a"],PageTable:d["a"]},data:function(){return{getListApi:o,listTypeInfo:{originList:[{key:"手机",value:0},{key:"论坛",value:1},{key:"管理平台",value:2}],typeList:[{key:"用户登录",value:1},{key:"用户登出",value:2},{key:"模块访问",value:3},{key:"功能操作",value:4}]},filterInfo:{query:{origin:"",type:""},list:[{type:"select",label:"日志来源",value:"origin",list:"originList"},{type:"select",label:"日志类型",value:"type",list:"typeList"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0}]},tableInfo:{refresh:1,initCurpage:1,data:[],fieldList:[{label:"日志来源",value:"origin",list:"originList"},{label:"日志类型",value:"type",list:"typeList"},{label:"日志标题",value:"title",list:"sexList"},{label:"日志描述",value:"desc",list:"accountTypeList"},{label:"访问IP",value:"ip",minWidth:160},{label:"用户",value:"create_user_name"},{label:"时间",value:"create_time",minWidth:180}]}}},computed:u({},Object(s["mapGetters"])(["userInfo"])),mounted:function(){this.getList()},methods:{getList:function(){this.tableInfo.refresh=Math.random()},handleClick:function(e,t){var a=this.tableInfo;switch(e){case"search":a.initCurpage=Math.random(),a.refresh=Math.random();break}},handleEvent:function(e,t){var a=this;switch(e){case"list":if(!t)return;t.forEach((function(e){e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break}}}},b=p,h=a("2877"),m=Object(h["a"])(b,i,n,!1,null,"e03a3d1e",null);t["default"]=m.exports},e61b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  1\n")])},n=[],l={},s=l,r=a("2877"),o=Object(r["a"])(s,i,n,!1,null,"e333df54",null);t["default"]=o.exports},ee9b:function(e,t,a){},ef3c:function(e,t,a){"use strict";a.r(t);a("a481");var i,n,l={beforeCreate:function(){var e=this.$route,t=e.params,a=e.query,i=t.path||"";this.$router.replace({path:"/"+i,query:a})},render:function(e){return e()}},s=l,r=a("2877"),o=Object(r["a"])(s,i,n,!1,null,null,null);t["default"]=o.exports},f48a:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent},scopedSlots:e._u([{key:"col-status",fn:function(e){return[a("i",{class:1===e.row.status?"el-icon-check":"el-icon-close",style:{color:1===e.row.status?"#67c23a":"#f56c6c",fontSize:"20px"}})]}},{key:"bt-status",fn:function(t){return[!t.data.item.show||t.data.item.ifRender&&!t.data.item.ifRender(t.data.row)?e._e():a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:t.data.row.status-1>=0?"danger":"success",icon:t.data.item.icon,disabled:t.data.item.disabled,loading:t.data.row[t.data.item.loading]},on:{click:function(a){return e.handleClick(t.data.item.event,t.data.row)}}},[e._v("\n        "+e._s(t.data.row.status-1>=0?"停用":"启用")+"\n      ")])]}}])}),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":"view"===e.dialogInfo.type?void 0:e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},[a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,rules:e.formInfo.rules,"label-width":e.formInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.formInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.formInfo,"ref",t)}},scopedSlots:e._u([{key:"form-icon",fn:function(){return[a("div",{staticClass:"slot-icon"},[a("img",{staticStyle:{height:"30px"},attrs:{src:e.formInfo.data.icon}}),e._v(" "),"view"!==e.dialogInfo.type||e.formInfo.data.icon?e._e():a("span",[e._v("暂未设置图标")]),e._v(" "),"view"!==e.dialogInfo.type?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-picture",size:"mini"},on:{click:function(t){return e.handleClick("selectFile")}}},[e._v("\n            "+e._s(e.formInfo.data.icon?"更换图标":"选择图标")+"\n          ")]):e._e()],1)]},proxy:!0},{key:"form-wikipedia",fn:function(){return[a("div",{staticClass:"slot-wikipedia"},["view"!==e.dialogInfo.type?a("mavon-editor",{attrs:{value:e.formInfo.data.wikipedia,placeholder:"请编写标签百科..."},on:{"update:value":function(t){return e.$set(e.formInfo.data,"wikipedia",t)}}}):a("div",{staticClass:"markdown",domProps:{innerHTML:e._s(e.marked(e.formInfo.data.wikipedia||"目前还没有关于这个标签的解释"))}})],1)]},proxy:!0}])})],1),e._v(" "),e.selectFileInfo.visible?a("select-file",{attrs:{type:e.selectFileInfo.type,visible:e.selectFileInfo.visible},on:{"update:visible":function(t){return e.$set(e.selectFileInfo,"visible",t)}},model:{value:e.formInfo.data.icon,callback:function(t){e.$set(e.formInfo.data,"icon",t)},expression:"formInfo.data.icon"}}):e._e()],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("7514"),a("ac6a"),a("7f7f"),a("bd86")),s=a("5880"),r=a("e3ee"),o=a("97d8"),c=a("32cc"),d=a("5f8b"),f=a("e94a"),u=a("0d40"),p=a("5ccc"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mavon-editor"},[a("div",{staticClass:"header"}),e._v(" "),a("mavon-editor",{staticClass:"editor",style:"max-height: "+e.maxHeight,attrs:{"font-size":"13px",placeholder:e.placeholder,toolbars:e.initToolbars(),subfield:!0},model:{value:e.editorValue,callback:function(t){e.editorValue=t},expression:"editorValue"}})],1)},h=[],m={props:{value:{type:String},placeholder:{type:String,default:"那些值得记录或者分享的..."},maxHeight:{type:String,default:"500px"}},data:function(){return{flag:"inner",editorValue:""}},watch:{editorValue:function(e){e===this.value?"outside"!==this.flag?this.$emit("update:value",e):this.flag="inner":this.$emit("update:value",e)},value:{handler:function(e){this.flag="outside",this.editorValue=e}}},methods:{initToolbars:function(){return{bold:!0,italic:!0,header:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,help:!0,preview:!0}}}},v=m,y=(a("0e06"),a("97db"),a("2877")),g=Object(y["a"])(v,b,h,!1,null,"17c8ad1a",null),I=g.exports,k=a("7a02");function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={components:{PageFilter:d["a"],PageTable:f["a"],PageDialog:u["a"],PageForm:p["a"],MavonEditor:I,SelectFile:k["a"]},data:function(){return{getListApi:o["d"],createApi:o["a"],updateApi:o["e"],deleteApi:o["b"],marked:c["a"],listTypeInfo:{tagTypeList:[],statusList:[{key:"启用",value:1},{key:"停用",value:0}]},filterInfo:{query:{name:"",status:""},list:[{type:"input",label:"标签名称",value:"name",list:"tagTypeList"},{type:"select",label:"状态",value:"status",list:"statusList"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0},{type:"button",label:"添加",btType:"primary",icon:"el-icon-plus",event:"create",show:!1}]},tableInfo:{refresh:1,initCurpage:1,data:[],fieldList:[{label:"标签名称",value:"name",type:"tag",minWidth:120},{label:"图标",value:"icon",type:"image",width:100},{label:"状态",value:"status",width:90,type:"slot"},{label:"创建时间",value:"create_time",width:180},{label:"更新时间",value:"update_time",width:180}],handle:{fixed:"right",label:"操作",width:"380",btList:[{label:"查看",type:"primary",icon:"el-icon-browse",event:"view",show:!0},{label:"启用",type:"success",icon:"el-icon-albb-process",event:"status",loading:"statusLoading",show:!1,slot:!0},{label:"编辑",type:"",icon:"el-icon-edit",event:"update",show:!1},{label:"删除",type:"danger",icon:"el-icon-delete",event:"delete",show:!1}]}},formInfo:{ref:null,data:{id:"",name:"",icon:"",sort:"",wikipedia:"",status:1},fieldList:[{label:"标签名称",value:"name",type:"input",required:!0},{label:"标签图标",value:"icon",type:"slot",className:"el-form-block"},{label:"排序",value:"sort",type:"input"},{label:"状态",value:"status",type:"select",list:"statusList",required:!0},{label:"标签百科",value:"wikipedia",type:"slot",className:"el-form-block"}],rules:{},labelWidth:"120px"},dialogInfo:{width:"80%",title:{create:"添加",update:"编辑",view:"详细信息"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]},selectFileInfo:{type:2,visible:!1,value:""}}},computed:L({},Object(s["mapGetters"])(["userInfo","dataPerms"])),watch:{"dialogInfo.visible":function(e){var t=this.formInfo;e||(t.ref&&t.ref.resetFields(),this.resetForm(),this.dialogInfo.btLoading=!1)}},mounted:function(){this.initList(),this.initDataPerms(),this.initRules(),this.getList()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList,t=this.filterInfo.list;this.$initDataPerms("tagMan",e),this.$initDataPerms("tagMan",t)},initRules:function(){var e=this.formInfo;e.rules=this.$initRules(e.fieldList)},initList:function(){var e=this,t=this.listTypeInfo;Object(r["c"])().then((function(a){a.success?t.tagTypeList=a.content.map((function(e){return{key:e.name,value:e.id}})):e.$message({showClose:!0,message:a.message,type:a.success?"success":"error",duration:3500})}))},getList:function(){this.tableInfo.refresh=Math.random()},getPlaceholder:function(e){var t;return t="input"===e.type||"textarea"===e.type?"请输入"+e.label:"select"===e.type||"time"===e.type||"date"===e.type?"请选择"+e.label:e.label,t},handleClick:function(e,t){var a=this,i=this.tableInfo,n=this.dialogInfo,l=this.formInfo;switch(e){case"search":i.initCurpage=Math.random(),i.refresh=Math.random();break;case"create":n.type=e,n.visible=!0;break;case"view":case"update":for(var s in n.type=e,n.visible=!0,t)s in l.data&&(l.data[s]=t[s]);break;case"status":var r={};for(var c in t)c in l.data&&(r[c]=t[c]);r.status=r.status-1>=0?0:1,t.statusLoading=!0,this.$handleAPI("update",o["e"],r).then((function(e){t.statusLoading=!1,e.success&&(t.status=r.status)})).catch((function(){t.statusLoading=!1}));break;case"delete":this.$handleAPI(e,o["b"],t.id).then((function(e){e.success&&(i.refresh=Math.random())}));break;case"close":n.visible=!1;break;case"save":this.formInfo.ref.validate((function(e){if(e){var t,l=a.formInfo.data,s=a.dialogInfo.type;if("create"===s)t=o["a"];else{if("update"!==s)return;t=o["e"]}n.btLoading=!0,a.$handleAPI(s,t,l).then((function(e){e.success&&(n.visible=!1,i.refresh=Math.random()),n.btLoading=!1})).catch((function(e){n.btLoading=!1}))}}));break;case"selectFile":this.selectFileInfo.visible=!0;break}},handleEvent:function(e,t){var a=this;switch(e){case"list":if(!t)return;t.forEach((function(e){a.$set(e,"statusLoading",!1);var t=a.listTypeInfo.tagTypeList.find((function(t){return t.value===e.type_id}));e.type_name=t?t.key:e.type_id,e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break}},resetForm:function(){this.formInfo.data={id:"",name:"",icon:"",sort:"",wikipedia:"",status:1}}}},_=O,C=(a("8b5c"),Object(y["a"])(_,i,n,!1,null,null,null));t["default"]=C.exports},f49b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent},scopedSlots:e._u([{key:"col-status",fn:function(e){return[a("i",{class:1===e.row.status?"el-icon-check":"el-icon-close",style:{color:1===e.row.status?"#67c23a":"#f56c6c",fontSize:"20px"}})]}},{key:"bt-status",fn:function(t){return[!t.data.item.show||t.data.item.ifRender&&!t.data.item.ifRender(t.data.row)?e._e():a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:t.data.row.status-1>=0?"danger":"success",icon:t.data.item.icon,disabled:t.data.item.disabled,loading:t.data.row[t.data.item.loading]},on:{click:function(a){return e.handleClick(t.data.item.event,t.data.row)}}},[e._v("\n        "+e._s(t.data.row.status-1>=0?"停用":"启用")+"\n      ")])]}}])}),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},["bind"!==e.dialogInfo.type?a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,rules:e.formInfo.rules,"label-width":e.formInfo.labelWidth,"list-type-info":e.listTypeInfo},on:{"update:refObj":function(t){return e.$set(e.formInfo,"ref",t)},"update:ref-obj":function(t){return e.$set(e.formInfo,"ref",t)}},scopedSlots:e._u([{key:"form-icon",fn:function(){return[a("div",{staticClass:"slot-icon"},[a("img",{staticStyle:{height:"30px"},attrs:{src:e.formInfo.data.icon}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-picture",size:"mini"},on:{click:function(t){return e.handleClick("selectFile")}}},[e._v("\n            "+e._s(e.formInfo.data.icon?"更换图标":"选择图标")+"\n          ")])],1)]},proxy:!0}],null,!1,1152723193)}):e._e(),e._v(" "),e.dialogInfo.visible&&"bind"===e.dialogInfo.type?a("select-tags",{staticStyle:{width:"100%"},attrs:{"bind-tags":e.bindTagsInfo.tags,size:"medium"},on:{"update:bindTags":function(t){return e.$set(e.bindTagsInfo,"tags",t)},"update:bind-tags":function(t){return e.$set(e.bindTagsInfo,"tags",t)}}}):e._e()],1),e._v(" "),e.selectFileInfo.visible?a("select-file",{attrs:{type:e.selectFileInfo.type,visible:e.selectFileInfo.visible},on:{"update:visible":function(t){return e.$set(e.selectFileInfo,"visible",t)}},model:{value:e.formInfo.data.icon,callback:function(t){e.$set(e.formInfo.data,"icon",t)},expression:"formInfo.data.icon"}}):e._e()],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("ac6a"),a("bd86")),s=a("5880"),r=a("e3ee"),o=a("5f8b"),c=a("e94a"),d=a("0d40"),f=a("5ccc"),u=a("7a02"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{multiple:"",size:e.size,"multiple-limit":e.limit,filterable:"",placeholder:e.placeholder},model:{value:e.tags,callback:function(t){e.tags=t},expression:"tags"}},e._l(e.tagData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)},b=[],h=(a("c5f6"),a("97d8")),m={name:"SelectTags",props:{bindTags:{type:Array,default:function(){return[]}},size:{type:String,default:"small"},limit:{type:Number,default:0},placeholder:{type:String,default:"请选择标签"}},data:function(){return{flag:"inner",tags:[],reqStatus:!1,tagData:[]}},watch:{bindTags:{handler:function(e){this.flag="outside",this.tags=e},deep:!0,immediate:!0},tags:{handler:function(e){JSON.stringify(e)===JSON.stringify(this.bindTags)?"outside"!==this.flag?this.$emit("update:bindTags",e):this.flag="inner":this.$emit("update:bindTags",e)},deep:!0}},mounted:function(){this.getTags()},methods:{getTags:function(){var e=this;this.reqStatus||Object(h["c"])().then((function(t){t.success&&(e.reqStatus=!0,e.tagData=t.content)}))}}},v=m,y=a("2877"),g=Object(y["a"])(v,p,b,!1,null,"7b0a065e",null),I=g.exports;function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L={components:{PageFilter:o["a"],PageTable:c["a"],PageDialog:d["a"],PageForm:f["a"],SelectFile:u["a"],SelectTags:I},data:function(){return{getListApi:r["e"],createApi:r["a"],updateApi:r["g"],deleteApi:r["b"],listTypeInfo:{statusList:[{key:"启用",value:1},{key:"停用",value:0}]},filterInfo:{query:{name:"",status:""},list:[{type:"input",label:"类型名称",value:"name"},{type:"select",label:"状态",value:"status",list:"statusList"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0},{type:"button",label:"添加",btType:"primary",icon:"el-icon-plus",event:"create",show:!1}]},tableInfo:{refresh:1,initCurpage:1,data:[],fieldList:[{label:"类型名称",value:"name",minWidth:90},{label:"图标",value:"icon",type:"image",width:100},{label:"描述",value:"desc",minWidth:160},{label:"状态",value:"status",width:90,type:"slot"},{label:"创建时间",value:"create_time",width:180},{label:"更新时间",value:"update_time",width:180}],handle:{fixed:"right",label:"操作",width:"380",btList:[{label:"绑定标签",type:"info",icon:"el-icon-albb-tools",event:"bind",loading:"bindLoading",show:!0},{label:"启用",type:"success",icon:"el-icon-albb-process",event:"status",loading:"statusLoading",show:!1,slot:!0},{label:"编辑",type:"",icon:"el-icon-edit",event:"update",show:!1},{label:"删除",type:"danger",icon:"el-icon-delete",event:"delete",show:!1}]}},formInfo:{ref:null,data:{id:"",name:"",icon:"",sort:"",desc:"",status:1},fieldList:[{label:"类型名称",value:"name",type:"input",required:!0},{label:"类型图标",value:"icon",type:"slot",className:"el-form-block"},{label:"排序",value:"sort",type:"input"},{label:"描述",value:"desc",type:"textarea",className:"el-form-block"},{label:"状态",value:"status",type:"select",list:"statusList",required:!0}],rules:{},labelWidth:"120px"},dialogInfo:{title:{create:"添加",update:"编辑",bind:"绑定标签"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]},bindTagsInfo:{tagTypeId:"",tags:[]},selectFileInfo:{type:2,visible:!1,value:""}}},computed:w({},Object(s["mapGetters"])(["userInfo","dataPerms"])),watch:{"dialogInfo.visible":function(e){var t=this.formInfo;e||(t.ref&&t.ref.resetFields(),this.resetForm(),this.bindTagsInfo={tagTypeId:"",tags:[]},this.dialogInfo.btLoading=!1)}},mounted:function(){this.initDataPerms(),this.initRules(),this.getList()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList,t=this.filterInfo.list;this.$initDataPerms("tagTypeMan",e),this.$initDataPerms("tagTypeMan",t)},initRules:function(){var e=this.formInfo;e.rules=this.$initRules(e.fieldList)},getList:function(){this.tableInfo.refresh=Math.random()},getPlaceholder:function(e){var t;return t="input"===e.type||"textarea"===e.type?"请输入"+e.label:"select"===e.type||"time"===e.type||"date"===e.type?"请选择"+e.label:e.label,t},handleBindTags:function(){var e=this,t=this.bindTagsInfo,a=this.dialogInfo;a.btLoading=!0,Object(r["f"])(t).then((function(t){t.success&&(a.visible=!1),a.btLoading=!1,e.$message({showClose:!0,message:t.message,type:t.success?"success":"error",duration:3500})})).catch((function(e){a.btLoading=!1}))},handleClick:function(e,t){var a=this,i=this.tableInfo,n=this.dialogInfo,l=this.formInfo;switch(e){case"search":i.initCurpage=Math.random(),i.refresh=Math.random();break;case"create":n.type=e,n.visible=!0;break;case"update":for(var s in n.type=e,n.visible=!0,t)s in l.data&&(l.data[s]=t[s]);break;case"bind":n.type=e,n.visible=!0,this.bindTagsInfo.tagTypeId=t.id,Object(r["d"])({tagTypeId:t.id}).then((function(e){e.success&&(a.bindTagsInfo.tags=e.content.map((function(e){return e.tag_id})))}));break;case"status":var o={};for(var c in t)c in l.data&&(o[c]=t[c]);o.status=o.status-1>=0?0:1,t.statusLoading=!0,this.$handleAPI("update",r["g"],o).then((function(e){t.statusLoading=!1,e.success&&(t.status=o.status)})).catch((function(){t.statusLoading=!1}));break;case"delete":this.$handleAPI(e,r["b"],t.id).then((function(e){e.success&&(i.refresh=Math.random())}));break;case"close":n.visible=!1;break;case"save":var d=this.dialogInfo.type;if("bind"===d)return void this.handleBindTags();this.formInfo.ref.validate((function(e){if(e){var t,l=a.formInfo.data;if("create"===d)t=r["a"];else{if("update"!==d)return;t=r["g"]}n.btLoading=!0,a.$handleAPI(d,t,l).then((function(e){e.success&&(n.visible=!1,i.refresh=Math.random()),n.btLoading=!1})).catch((function(e){n.btLoading=!1}))}}));break;case"selectFile":this.selectFileInfo.visible=!0;break}},handleEvent:function(e,t){var a=this;switch(e){case"list":if(!t)return;t.forEach((function(e){a.$set(e,"bindLoading",!1),a.$set(e,"statusLoading",!1),e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break}},resetForm:function(){this.formInfo.data={id:"",name:"",icon:"",sort:"",desc:"",status:1}}}},O=L,_=Object(y["a"])(O,i,n,!1,null,null,null);t["default"]=_.exports},f4e6:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("page-filter",{attrs:{query:e.filterInfo.query,"filter-list":e.filterInfo.list,"list-type-info":e.listTypeInfo},on:{"update:query":function(t){return e.$set(e.filterInfo,"query",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}}),e._v(" "),a("page-table",{attrs:{refresh:e.tableInfo.refresh,"init-curpage":e.tableInfo.initCurpage,data:e.tableInfo.data,api:e.getListApi,query:e.filterInfo.query,"field-list":e.tableInfo.fieldList,"list-type-info":e.listTypeInfo,handle:e.tableInfo.handle},on:{"update:data":function(t){return e.$set(e.tableInfo,"data",t)},handleClick:e.handleClick,handleEvent:e.handleEvent},scopedSlots:e._u([{key:"col-title",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看文章详细信息",placement:"left"}},[a("a",{style:"color: "+e.theme+"; padding: 0 20px;",on:{click:function(a){return e.handleClick("view",t.row)}}},[e._v(e._s(t.row.title))])])]}}])}),e._v(" "),a("page-dialog",{attrs:{title:e.dialogInfo.title[e.dialogInfo.type],visible:e.dialogInfo.visible,width:e.dialogInfo.width,"bt-loading":e.dialogInfo.btLoading,"bt-list":"view"===e.dialogInfo.type?void 0:e.dialogInfo.btList},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)},handleClick:e.handleClick,handleEvent:e.handleEvent}},[a("p",{staticClass:"title"},[e._v(e._s(e.articleInfo.title))]),e._v(" "),a("div",{staticClass:"markdown",domProps:{innerHTML:e._s(e.marked(e.articleInfo.content))}})])],1)},n=[],l=(a("8e6e"),a("456d"),a("cadf"),a("ac6a"),a("bd86")),s=a("5880"),r=a("176e");function o(e){return Object(r["a"])({url:"/api/question/create",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/api/question/update",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/api/question/delete/".concat(e),method:"delete"})}function f(e){return Object(r["a"])({url:"/api/question/getRow/".concat(e),method:"get"})}function u(e){return Object(r["a"])({url:"/api/question/getList",method:"get",params:e})}var p=a("32cc"),b=a("5f8b"),h=a("e94a"),m=a("0d40");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={components:{PageFilter:b["a"],PageTable:h["a"],PageDialog:m["a"]},data:function(){return{getListApi:u,createApi:o,updateApi:c,deleteApi:d,marked:p["a"],listTypeInfo:{flagList:[{key:"草稿",value:1},{key:"审核中",value:2},{key:"已发布",value:3},{key:"审核失败",value:4},{key:"封禁",value:5}],progressList:[{key:"等待回答",value:1},{key:"已有回答",value:2},{key:"已解决",value:3}]},filterInfo:{query:{title:"",type:"",flag:""},list:[{type:"input",label:"问题标题",value:"title"},{type:"select",label:"状态",value:"flag",list:"flagList"},{type:"button",label:"搜索",btType:"primary",icon:"el-icon-search",event:"search",show:!0}]},tableInfo:{refresh:1,initCurpage:1,data:[],fieldList:[{label:"问题标题",value:"title",type:"slot",minWidth:180},{label:"解答进度",value:"progress",width:120},{label:"状态",value:"flag",width:90,type:"select",list:"flagList"},{label:"创建人",value:"create_user_name"},{label:"创建时间",value:"create_time",width:180}],handle:{fixed:"right",label:"操作",width:"100",btList:[{label:"删除",type:"danger",icon:"el-icon-delete",event:"delete",show:!1,ifRender:function(e){return 1===e.flag}}]}},articleInfo:{},dialogInfo:{width:"80%",title:{create:"添加",update:"编辑",view:"文章信息"},visible:!1,type:"",btLoading:!1,btList:[{label:"关闭",type:"",icon:"",event:"close",show:!0},{label:"保存",type:"primary",icon:"",event:"save",saveLoading:!1,show:!0}]},selectFileInfo:{type:2,visible:!1,value:""}}},computed:y({},Object(s["mapGetters"])(["theme","userInfo","dataPerms"])),watch:{},mounted:function(){this.initList(),this.initDataPerms(),this.getList()},methods:{initDataPerms:function(){var e=this.tableInfo.handle.btList,t=this.filterInfo.list;this.$initDataPerms("questionMan",e),this.$initDataPerms("questionMan",t)},initList:function(){},getList:function(){this.tableInfo.refresh=Math.random()},handleClick:function(e,t){var a=this,i=this.tableInfo,n=this.dialogInfo;switch(e){case"search":i.initCurpage=Math.random(),i.refresh=Math.random();break;case"create":n.type=e,n.visible=!0;break;case"view":case"update":n.type=e,n.visible=!0,this.articleInfo=JSON.parse(JSON.stringify(t)),f(t.id).then((function(e){e.success&&(a.articleInfo=e.content[0])}));break;case"delete":this.$handleAPI(e,d,t.id).then((function(e){e.success&&(i.refresh=Math.random())}));break;case"close":n.visible=!1;break}},handleEvent:function(e,t){var a=this;switch(e){case"list":if(!t)return;t.forEach((function(e){a.$set(e,"statusLoading",!1),e.create_time=a.$fn.switchTime(e.create_time,"YYYY-MM-DD hh:mm:ss"),e.update_time=a.$fn.switchTime(e.update_time,"YYYY-MM-DD hh:mm:ss")}));break}}}},I=g,k=(a("451a"),a("2877")),w=Object(k["a"])(I,i,n,!1,null,"0ab45ccf",null);t["default"]=w.exports},f560:function(e,t,a){"use strict";var i=a("ad94"),n=a.n(i);n.a},f7a6:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"j",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"i",(function(){return r})),a.d(t,"g",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"c",(function(){return f})),a.d(t,"h",(function(){return u})),a.d(t,"d",(function(){return p}));var i=a("176e");function n(e){return Object(i["a"])({url:"/api/menu/create",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/api/menu/update",method:"put",data:e})}function s(e){return Object(i["a"])({url:"/api/menu/delete/".concat(e),method:"delete"})}function r(e){return Object(i["a"])({url:"/api/menu/getRoleMenu",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/api/menu/getAll",method:"get",params:e})}function c(e){return Object(i["a"])({url:"/api/dataPerms/create",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/api/dataPerms/update",method:"put",data:e})}function f(e){return Object(i["a"])({url:"/api/dataPerms/delete/".concat(e),method:"delete"})}function u(e){return Object(i["a"])({url:"/api/dataPerms/getRoleDataPerms",method:"get",params:e})}function p(e){return Object(i["a"])({url:"/api/dataPerms/getAll",method:"get",params:e})}},f987:function(e,t,a){},fa83d:function(e,t,a){},fc18:function(e,t,a){}}]);